<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R Cheat Sheets &amp; Notes</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Statistics Notebook</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Describing Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="GraphicalSummaries.html">Graphical Summaries</a>
    </li>
    <li>
      <a href="NumericalSummaries.html">Numerical Summaries</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Making Inference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="MakingInference.html">Making Inference</a>
    </li>
    <li>
      <a href="tTests.html">t Tests</a>
    </li>
    <li>
      <a href="WilcoxonTests.html">Wilcoxon Tests</a>
    </li>
    <li>
      <a href="ANOVA.html">ANOVA</a>
    </li>
    <li>
      <a href="Kruskal.html">Kruskal-Wallis</a>
    </li>
    <li>
      <a href="LinearRegression.html">Linear Regression</a>
    </li>
    <li>
      <a href="LogisticRegression.html">Logistic Regression</a>
    </li>
    <li>
      <a href="ChiSquaredTests.html">Chi Squared Tests</a>
    </li>
    <li>
      <a href="PermutationTests.html">Randomization Testing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./Analyses/Rent.html">Rent Analysis</a>
    </li>
    <li>
      <a href="./Analyses/Stephanie.html">Stephanie Analysis</a>
    </li>
    <li>
      <a href="./Analyses/tTests/HighSchoolSeniors.html">T-tests High School Seniors</a>
    </li>
    <li>
      <a href="./Analyses/WilcoxonTests/RecallingWords.html">Wilcoxon Recalling Words</a>
    </li>
    <li>
      <a href="./Analyses/ANOVA/DayCare.html">ANOVA Day Care</a>
    </li>
    <li>
      <a href="./Analyses/Kruskal-Wallis Test/Chocolate.html">Kruskal Wallis Chocolate</a>
    </li>
    <li>
      <a href="./Analyses/Linear Regression/MySimpleLinearRegression.html">Simple Linear Regression Portland CRV</a>
    </li>
    <li>
      <a href="./Analyses/Linear Regression/CarPrices.html">Multiple Linear Regression Chevy</a>
    </li>
    <li>
      <a href="./Analyses/Linear Regression/PNWcrv.html">Consulting Project (MLR) PNW CRV</a>
    </li>
    <li>
      <a href="./Analyses/Linear Regression/MyLogisticRegression.html">Simple Logistic Regression Breast Cancer</a>
    </li>
    <li>
      <a href="./Analyses/Chi Squared Tests/MyChiSquaredTest.html">Chi Squared GSS</a>
    </li>
    <li>
      <a href="./Analyses/AnalysisRubric.html">Analysis Rubric</a>
    </li>
    <li>
      <a href="./Analyses/StudentHousing.html">Good Example Analysis</a>
    </li>
    <li>
      <a href="./Analyses/StudentHousingPOOR.html">Poor Example Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RCheatSheetsAndNotes.html">R Cheatsheets &amp; Notes</a>
    </li>
    <li>
      <a href="RCommands.html">R Commands</a>
    </li>
    <li>
      <a href="RMarkdownHints.html">R Markdown Hints</a>
    </li>
    <li>
      <a href="DataSources.html">Data Sources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">R Cheat Sheets &amp; Notes</h1>

</div>


<p><a href="#test-tips">Test Tips</a>, <a href="#code-notes">Code Notes</a> <br> Class Notes: [Week 1] , [Week 2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14] Useful Tidbits: <a href="Notes">Class Notes</a></p>
<div id="cheat-sheets" class="section level3">
<h3>Cheat Sheets</h3>
<ul>
<li><p><a href="file:///C:/Users/rizen/OneDrive/Documents/BYUI/DataScience%20Certificate/INT%20STAT/Statistics-Notebook-master/RColorGuide.html">R Color Guide</a></p></li>
<li><p><a href="http://www.joyce-robbins.com/wp-content/uploads/2016/04/BaseGraphicsCheatsheet.pdf">R Base Graphics Cheat Sheet</a></p></li>
<li><p><a href="https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf">R Base Commands Cheat Sheet</a></p></li>
<li><p><a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">R Markdown Cheat Sheet</a></p></li>
<li><p><a href="https://rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">ggplot2 Cheat Sheet</a></p></li>
<li><p><a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">Keyboard Shortcuts</a><br/></p></li>
</ul>
</div>
<div id="test-tips" class="section level3">
<h3>Test Tips</h3>
<p>Read output carefully so you understand what it’s saying! For quartemile time (qsec) a lower number is better.<br> Read carefully so you don’t miss info in the questions.<br> Carefully look at similar words linear v logistic!<br> Make sure to check whether the answer is positive or negative.<br> Check normality to know whether parametric or non-parametric.<br> Kruskal p-value total to the right of the line/total.<br> What each row represents cannot be a column name.<br> Curved regression line polynomial uses x and x2 so temp and temp2 in formula.<br> Chi squared 2 qualitative.<br> To know which test to use draw a graphic and compare with the ones next to the tests.<br> Check whether it should be a factor.(if number) catagorical variable must be a factor (qualitative) except might be if it’s a zero and one —If the number should be a catagorical then make it a factor<br> Regression–the only one that makes sense for two continuous variables is linear regression.<br> Make sure you put a zero before the decimal in Canvas.<br> When predicting logistic regression by hand make sure you have the parentheses in the right places, exp(-6.6035+.3070<em>25)/(1+exp(-6.6035+.307</em>25)) the ones before the 1 and at the end are very important!<br> Since exp(0.3070) = 1.359341, we find that the odds of a success, i.e., that Yi =1 increases by 35.9341%, which rounds to 36% for every 1 unit increase in x. Notices that the 35.9341 came from 1.359341. If you have 1.36 of what you originally had, then you increased by 0.36 or 36%.<br></p>
</div>
<div id="analysis-code-index" class="section level3">
<h3>Analysis code index</h3>
<div id="rent-analysis" class="section level4">
<h4>Rent Analysis</h4>
<p>Side-by-side boxplots with different colors (ggplot)</p>
<ul>
<li>Title and subtitle</li>
<li>Justification(0-1)</li>
<li>Blank background</li>
<li>Increase font size</li>
<li>X axes lines</li>
</ul>
<p>5 number summary using rbind and pander</p>
<p>Scatter plot (base r)</p>
<ul>
<li>Pch colored using case_when on a column</li>
<li>Legend</li>
</ul>
</div>
<div id="stephanie-analysis" class="section level4">
<h4>Stephanie Analysis</h4>
<p>Drop a column from a dataset</p>
<p>Abline example</p>
<p>Rbind &amp; pander</p>
</div>
<div id="high-school-seniors" class="section level4">
<h4>High School Seniors</h4>
</div>
</div>
<div id="code-notes" class="section level3">
<h3>Code Notes</h3>
<div id="generic" class="section level4">
<h4>Generic</h4>
<p>Ctrl + L to clear console Getwd()<br> Glimpse() to see the data and it’s types (good for when ? Doesn’t work)<br> In rmd ctr shft c to comment/uncomment<br> Echo = false means the code won’t show just output<br> Double question marks tells you where<br> Don’t put install in the script cause it’ll do it every time<br> Say no to saving workspace instead save a script with everything.<br> Shortcut for pipe is ctrl + shift + m<br></p>
</div>
<div id="graphics" class="section level4">
<h4>Graphics</h4>
<p>Notebook add links to rmd files (can also put line number)<br> P + theme(text=element_text(size24))</p>
</div>
<div id="problems" class="section level4">
<h4>Problems</h4>
<p>Mismatched directories can sometimes cause you problems when you knit.<br> Session&gt;Set Working Directory to Source file location<br> NAs are contagious they will permiate your data, pass na.rm true to remove the nas<br> Session &gt; restart R because he overwrote his data<br> Clicking on broom cleans out all the data<br></p>
</div>
<div id="r-markdown" class="section level4">
<h4>R Markdown</h4>
</div>
<div id="reminders" class="section level4">
<h4>Reminders</h4>
<p>Don’t do anything to the original data file make sure to assign it to a new name!!!<br> Filter rows/select columns<br> Colnames() to see the column names<br> Tibble() see code for names and first few rows<br> Easier to do test questions in base R<br> Filter into a new data set before summarizing<br></p>
<p><a id="Notes"></a></p>
</div>
</div>
<div id="class-notes" class="section level3">
<h3>Class Notes</h3>
<div id="intro-to-r-studio-week-1" class="section level4">
<h4>Intro to R Studio, Week 1</h4>
<p><a id="1"> Settings gear click Preview in viewer plane to see it all in R<br> Ctr + enter submits current line to console<br> In rmd ctr shft c to comment/uncomment<br> Echo = false means the code won’t show just output<br></p>
<p>Things learned about scatterplots Base R<br> Pch plotting character<br> Type= p(points), l(lines), or b(both)<br> Xlab &amp; ylab lab=label<br> Main= for main title, don’t forget quotes<br> Col=&lt;“color name”&gt; or c(&lt;“color1”&gt;, &lt;“color2”&gt;, …)<br> Y ~ x (NOT x ~ y)<br></p>
<div id="skills-quiz-intro-to-r" class="section level5">
<h5>Skills Quiz, Intro to R</h5>
<p>Create new column: mutate(<new column name> = <formula>) ie. weight = wt*1000</p>
</div>
<div id="assessment-quiz" class="section level5">
<h5>Assessment Quiz</h5>
<p>Statistic most meaningful for describing typical cost of monthly gas bill:<br> Mean if normal, median if data skewed. Use boxplot or hist to check skew<br> Compute the average a of b: mean(a ~ b, data=<data>)<br> Good choice graphic when 2 quantatative is scatterplot<br> When growth of a as b: plot(a ~ b, data=<data>)<br> Which most likely at #, abline(…#)<br> <br></p>
</div>
</div>
<div id="intro-to-data-wrangling-visualization-week-2" class="section level4">
<h4>Intro to Data Wrangling &amp; Visualization, Week 2</h4>
<p>Mismatched directories can sometimes cause problems when you knit, use getwd(), session&gt;set working<br> directory&gt;To Source File Location</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">View</span>(KidsFeet)</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># Boxplot &amp; five number summary</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co"># Side by side boxplot y~x</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># Length quantitative by gender quantitative</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">boxplot</span>(length <span class="op">~</span><span class="st"> </span>sex, <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">boxplot</span>(KidsFeet<span class="op">$</span>length <span class="op">~</span><span class="st"> </span>KidsFeet<span class="op">$</span>sex, <span class="dt">col=</span><span class="st">&quot;orange&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Distribution of Feet Length by Sex&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Length&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Sex&quot;</span>) </a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co"># Create a five - number summary table in support of the boxplot</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">library</span>(pander) <span class="co"># makes it look more pretty (numerical summaries)</span></a>
<a class="sourceLine" id="cb1-13" title="13">KidsFeet <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">min =</span> <span class="kw">min</span>(length),</a>
<a class="sourceLine" id="cb1-16" title="16">            <span class="dt">Q1 =</span> <span class="kw">quantile</span>(length, <span class="fl">.25</span>),</a>
<a class="sourceLine" id="cb1-17" title="17">            <span class="dt">median =</span> <span class="kw">median</span>(length),</a>
<a class="sourceLine" id="cb1-18" title="18">            <span class="dt">Q3 =</span> <span class="kw">quantile</span>(length, <span class="fl">.75</span>), </a>
<a class="sourceLine" id="cb1-19" title="19">            <span class="dt">max =</span> <span class="kw">max</span>(length)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co"># Bar plots and table counts</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co"># Counts how many of each occourrance each value occurs</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co"># Brother Palmers way</span></a>
<a class="sourceLine" id="cb1-24" title="24">total &lt;-<span class="st"> </span><span class="kw">table</span>(KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">barplot</span>(total)</a>
<a class="sourceLine" id="cb1-26" title="26"><span class="kw">barplot</span>(<span class="kw">table</span>(KidsFeet<span class="op">$</span>sex))</a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co"># Create a bar plot that shows how many boys and girls feet are in the data set</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="kw">table</span>(KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co"># Scatterplot and correlation</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="co"># Scatter plot shows relationship between, two quantitative variables</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="kw">plot</span>(length <span class="op">~</span><span class="st"> </span>width, <span class="dt">data =</span> KidsFeet)</a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co"># Correlation coefficient summarized scater plot data, cor here stands for correlation</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="co"># Notice passed in opposite order (x, y)</span></a>
<a class="sourceLine" id="cb1-36" title="36">KidsFeet <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">cor</span>(width, length))</a>
<a class="sourceLine" id="cb1-37" title="37"></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co"># Plot example with ggplot (if done as below already piped in data)</span></a>
<a class="sourceLine" id="cb1-39" title="39">KidsFeet <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> width, <span class="dt">y =</span> length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb1-40" title="40"></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="co"># ?mean()</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co"># For mean need to add mean(data$co, na.rm = true)</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co"># ?cor (stats)</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co"># Correlation does not have an remove na, for this one must find a different options pairwise.complete.obs</span></a>
<a class="sourceLine" id="cb1-45" title="45"></a>
<a class="sourceLine" id="cb1-46" title="46">auto &lt;-<span class="st"> </span><span class="kw">filter</span>(mtcars, am <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-47" title="47">man &lt;-<span class="st">   </span><span class="kw">filter</span>(mtcars, am <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-48" title="48"><span class="kw">mean</span>(man<span class="op">$</span>hp)</a>
<a class="sourceLine" id="cb1-49" title="49"></a>
<a class="sourceLine" id="cb1-50" title="50"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;skyblue&quot;</span>,<span class="st">&quot;firebrick&quot;</span>))</a>
<a class="sourceLine" id="cb1-51" title="51"></a>
<a class="sourceLine" id="cb1-52" title="52"><span class="kw">plot</span>(mpg <span class="op">~</span><span class="st"> </span>qsec, <span class="dt">data=</span>mtcars, <span class="dt">col=</span><span class="kw">as.factor</span>(am), <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">xlab=</span><span class="st">&quot;Quarter Mile Time (seconds)&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Miles per Gallon&quot;</span>, <span class="dt">main=</span><span class="st">&quot;1974 Motor Trend Vehicles&quot;</span>)</a>
<a class="sourceLine" id="cb1-53" title="53"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">legend=</span><span class="kw">c</span>(<span class="st">&quot;automatic&quot;</span>,<span class="st">&quot;manual&quot;</span>), <span class="dt">title=</span><span class="st">&quot;Transmission&quot;</span>, <span class="dt">bty=</span><span class="st">&#39;n&#39;</span>, <span class="dt">col=</span><span class="kw">palette</span>())</a></code></pre></div>
<div id="skills-quiz-data-wrangling-and-visualization" class="section level5">
<h5>Skills Quiz, Data Wrangling and Visualization</h5>
<p>Which graphic works best? Looks like stripchart works for 1 qual and 1 quant (plot, boxplot, stripchart answers)</p>
</div>
<div id="assessment-quiz-1" class="section level5">
<h5>Assessment Quiz</h5>
<p>Read output carefully so you understand what it’s saying! For quartemile time (qsec) a lower number is better.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Gross hp of auto and man transmission</span></a>
<a class="sourceLine" id="cb2-2" title="2">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(am) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(hp)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a></code></pre></div>
<p><br></p>
</div>
</div>
<div id="t-tests-week-3" class="section level4">
<h4>T-tests, Week 3</h4>
<p>Nos are more information than yeses. We set out to disprove our theories. Yeses just confirm your idea. If you think it’s right you’re just confirming bias Veritasium<br> They are all white<br> Is/are = must have an equals sign<br> We can disprove an equals sign. You can never prove something true, you can only disprove<br> 2 things needed for p-value, a test statistic and the sampling distribution of the test statistic<br> (sampling distribution sampling of all possible distribution)<br></p>
<p>Two things are necessary to calculate a p-value 1) a test statistic 2) The sampling distribution of the test statistic<br> The probability of obtaining a sample mean Ctest statistic) at least as extreme as the one you got just by random chance, assuming the null hypothesis is true.<br> 1. State the null and alternative hypotheses.<br> 2. Determine p-value based on test statistic<br> 3 decision regrading Ho<br> 4 State the conclusion (in context). What do you say about Ho<br> a. If reject Ho We have sufficient evidence to (Ha in English)<br> b. If don’t reject Ho- We have insufficient evedience to say that “Ha in English”<br> Remember Art (Alpha/Type 1 Reject True Ho) and BFF (Beta/Type II Fail to reject False Ho)</p>
<pre><code>                            Ho is True        Ha is True&lt;br&gt;</code></pre>
<p>conclusion: Don’t Reject Ho Correct Type II error<br> Reject Ho Type I Error Correct<br></p>
<p>Probabliity of Type 1 error = alpha (convicting an innocent man of a crime)<br> Probability of Type II Error = Beta (letting a guilty man go free)<br> Null hypothesis in jury is innocence so we either reject nul (guilty) or fail to reject null (not guilty), but we don’t accept the null (innocence)<br></p>
<div id="t-test-one-sample" class="section level5">
<h5>T-test, One-sample</h5>
<p>One sample t-test, xbar (stat), Ho: mu=# Ha: mu!=&lt;&gt;#, Req: Sampling distribution of xbar is normal shape, talks about one variable<br> Matched Pairs (Means of the Difference) Dbar mean(x1-x2) stat, Ho= mua= 0, Sampling distribution of dbar is normal, kniwing who’s ingroup 1 tells you something about who’s in group 2 like husbands and wives, siblings, same person measured twice, before and after–variables must have same units<br></p>
</div>
<div id="independent-samples-t-test-difference-of-means" class="section level5">
<h5>Independent samples t-test (difference of Means)</h5>
<p>x1 -x2 (stat), Ho: mu1 - mu2 = 0 or mu1 &lt;&gt;!=mu2, Req: Sampling distribution of xbar1 is normal and sampling distribution of xbar2 is normal (check separately, knowing who’s in group 1 tells you nothing about who’s in group 2 Different sized groups allowed like comparing males to females Normal n&gt;30, QQplot of the data is normal (if parent is normal, child is normal.) If not normal, use a non-parametric test Code for qqplot below in Skills quiz</p>
<p>Boxplots work well with t-test pared and independent</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw">View</span>(KidsFeet)</a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co"># By default the alternative is !</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="kw">t.test</span>(<span class="dt">x =</span> KidsFeet<span class="op">$</span>length, <span class="dt">mu =</span> <span class="dv">28</span>)</a></code></pre></div>
</div>
<div id="paired" class="section level5">
<h5>Paired</h5>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Calculate the difference for each row, and then do a one sample t-test</span></a>
<a class="sourceLine" id="cb5-2" title="2">newdata &lt;-<span class="st"> </span>KidsFeet <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">paired_diffs =</span> length <span class="op">-</span><span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span>width)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co"># Didn&#39;t have to have mu = 0 because it&#39;s the default</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">t.test</span>(<span class="dt">x =</span> newdata<span class="op">$</span>paired_diffs, <span class="dt">mu =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co"># There&#39;s sufficient evidence of length and 3 times width is not 0?</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co"># Do the paired test right within the t.test command</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="kw">t.test</span>(<span class="dt">x =</span> KidsFeet<span class="op">$</span>length, <span class="dt">y =</span> KidsFeet<span class="op">$</span>width <span class="op">*</span><span class="st"> </span><span class="dv">3</span>, <span class="dt">paired =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co"># Evidence length is not equal to three times the width</span></a></code></pre></div>
</div>
<div id="independent-t-tests" class="section level5">
<h5>Independent t-tests</h5>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co">#Hard Way</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#Square bracket allow you to subset the rows!</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#Careful use == or you will ruin your dataset</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">t.test</span>(<span class="dt">x =</span> KidsFeet<span class="op">$</span>length[KidsFeet<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;B&quot;</span>], </a>
<a class="sourceLine" id="cb6-5" title="5">       <span class="dt">y =</span> KidsFeet<span class="op">$</span>length[KidsFeet<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;G&quot;</span>])</a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co"># We have insufficient evidence to coclude that the mean boy foot length is less than girl</span></a>
<a class="sourceLine" id="cb6-7" title="7"></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co"># Easy Way, if data is nice and tidy</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co"># Right hand side is 1 for 1 sample, or factor with 2 levels</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="kw">t.test</span>(KidsFeet<span class="op">$</span>length <span class="op">~</span><span class="st"> </span>KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co"># Same result as hard way</span></a></code></pre></div>
</div>
<div id="qq-plots" class="section level5">
<h5>QQ Plots</h5>
<p>Are not a graphical summary only for the purpose of making sure that data is normal<br> The car package is better because it has the dashed lines to help you see if the points are inside the boundaries</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;car&quot;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">qqPlot</span>(KidsFeet<span class="op">$</span>length <span class="op">~</span><span class="st"> </span>KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co"># for one plot one vector</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">qqPlot</span>(KidsFeet<span class="op">$</span>length)</a></code></pre></div>
<p>Session &gt; restart R because he overwrote his data Clicking on broom cleans out all the data</p>
<div id="skills-quiz-t-tests-double-check-lft-rt-two.sided" class="section level6">
<h6>Skills Quiz, t Tests (double check lft, rt, two.sided)</h6>
<p>These are small sample sizes. You will need to create Q-Q Plots of each sample of data to determine if the data in each group is normal or not. It turns out that making these Q-Q Plots in R is a little cumbersome. Here is the code that does it correctly.<br></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">qqPlot</span>(uptake <span class="op">~</span><span class="st"> </span>Type, <span class="dt">data =</span> CO2.chilled<span class="fl">.250</span>)</a></code></pre></div>
</div>
<div id="assessment-quiz-2" class="section level6">
<h6>Assessment Quiz</h6>
<p>(no notes)</p>
<p><br></p>
</div>
</div>
</div>
<div id="wilcoxon-tests" class="section level4">
<h4>Wilcoxon Tests</h4>
<p>Equivalent to a one sample t-test or paired sample t-test version<br> Best for smaller sample sizes (data not normal)???CHECK<br> Nonparamentric version<br> Not good with tied rankings<br> Implied hypothesis if there truly was no difference (half would be neg and half positive) it would sum to the middle of the ranks (in our example 60)<br> <br> 1) Order the magnitude (absolute value) 2) Then rank them (if the value is negative add a negative value to the rank) 3) Put into two groups neg and pos 4) Choose the smaller group and take the absolute value of the sum. 5) That’s the test statistic</p>
<p>The median of the differences is not 0<br> Measured with the MEDIAN.<br> Ha: median<br> What’s the difference between the hypothesized medium<br> Is 7.25<br></p>
<p>If you have a sample size bigger than 30 use the regular t-test</p>
<div id="wilcoxon-rank-sum-mann-whitney-independent-samples" class="section level5">
<h5>Wilcoxon Rank Sum (Mann-Whitney) Independent samples</h5>
<p>Ho: difference in medians = 0<br> Or the distributions are stochastically equally (randomly)<br> Ho: median of boys feet length = median of girls foot length<br> Ha: median not equal<br></p>
<p>alpha = .05, p-value = .0836 &gt;.05, fail to reject the null<br> Insufficient evidence to conclude that median boys feet length is different than girl median foot length.<br> Comparing 2 types of bread spray<br> If they truly have the same median they have the same distribution.<br> If they came from the same distribution then they can be ranked together<br> If tied take the middle value 9 10 11 all get 10 , 12 and 13 get 12&gt;5<br> Return to their original groups<br> Pick one group sum the ranks get a value of 91.<br> We added bugspray As ranks it was on the high side so A is better at killing bed<br> Once I find out there truly is a difference then I can figure out which way<br> True location of mean isn’t the same as the other. One distribution is to the right or left or other. We simplify it by talking about the median, but it’s really matching the whole distribution.<br> The location being shifted. The median being shifted. (or mean if you’re assuming it’s a normal but we use this test because we don’t believe it is.)<br> Alpha- ART Alpha Reject True reject true null hypothesis/type I error SIGNIFICANCE LEVEL<br> Beta- BFF Beta Fail to Reject False<br> 1-Beta- Power-Ability to correctly detect an effect or a difference<br> 1-alpha- Confidence level<br> Variance is a measure of spread<br></p>
<p>The box plot shows how similar they are. P-value shows whether that similarity likely be chance.<br> Friendly data set resides in the car package<br> Leave all the other text in word list analysis.<br> It appears there may be a slight shift in medians with the West being higher. Since the distibutions are similarly shaped (slightly right skewed), an official test of the hypotheses<br> H0:difference in medians=0<br> Ha:difference in medians≠0<br> can be performed. Using a Wilcoxon Rank Sum Test (using the normal approximation with continuity correction due to ties in the data), we obtain a test statistic of W=181 and a p-value of 0.2376. There is insufficient evidence to reject the null. We conclude that any differences in medians demonstrated by the above boxplot is simply due to random sampling. The mobility scores for the entire U.S. appear to be the same on average (median) between the East and West.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">wilcox.test</span>(length<span class="op">~</span>sex, <span class="dt">data=</span>KidsFeet)</a></code></pre></div>
<p>To determine if it is reasonable to infer that this conclusion is valid in general (for the full population) a Wilcoxon Rank Sum Test will be used. While the two samples are not identically shaped (shown in the boxplots above) they are not different enough to violate the assumption of identical shape and spread that is required by the Rank Sum Test.<br> Note that since there are ties present in the data, an exact p<br> -value cannot be computed. An approximation will be used instead. # Because of the small sample size, a continuity correction will # # also be applied. The results of the test are still valid and show # sufficient evidence to reject the null hypothesis (p=0.01771&lt;α).</p>
<p>Skills Quiz, Wilcoxon Tests (non-parametric)</p>
<p>Assessment Quiz</p>
<p><br></p>
</div>
</div>
<div id="anova-week-5" class="section level4">
<h4>ANOVA, Week 5</h4>
<p>Test all three things simultaneously<br> Analysis of variance 1) compares variation between each of the sample means and 2) the variation within each of the samples.<br> Anova tests whether several populations have the same mean by compariing how far apart the sample means are with how much variation there is within the samples<br> Ratio of variance is the F statistic<br> Between group variation: variation of group means around the grand mean<br> Within group variation: average variation of observations around there group means<br></p>
<p>Degree of Freedom: the number of idependant pieces of information that went into calculating the estimate OR The denominator in the variance caluculation.<br> Variance is kind of an avareage (or mean) of squared deviations<br> Variance sum of squares/degrees of freedom (the ave square distance from the mean)<br></p>
<p>Degrees of freedom for numerator (between group variance*)<br> Degrees of freedom for denomitor or within group all data points minus the number of groups df2 - n-m<br></p>
<p>Cell means Model x sub(ij) = musumi +Error(ij)<br> Ho: mu(A)=mu(C)=mu(M), Ha: At least one mean is different<br> Treatement Effects Model<br> xsub(ij)= mu + a(i) + error(ij)<br> Size of effect(a) for a given factor level is the distance from the factor to the grand mean<br></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># New vocab, factor and level</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co"># Are the mean air temp for the measured months all equal?</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co"># Ho: effect of each month = 0</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co"># Ha: at least one month has a non-zero effect on temperature</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co"># catagorical on x axis</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="kw">plot</span>(Temp<span class="op">~</span>Month, <span class="dt">data =</span> airquality)</a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co"># In the case, the factor is Month (catagorical variable)</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co"># The factor levels are the month names (values within the category)</span></a>
<a class="sourceLine" id="cb10-10" title="10">my_aov &lt;-<span class="st"> </span><span class="kw">aov</span>(Temp<span class="op">~</span>Month, <span class="dt">data =</span> airquality)</a>
<a class="sourceLine" id="cb10-11" title="11"><span class="kw">summary</span>(my_aov)</a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co"># This didn&#39;t work because the month is an integer</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co"># This line creates the model</span></a>
<a class="sourceLine" id="cb10-14" title="14">my_aov &lt;-<span class="st"> </span><span class="kw">aov</span>(Temp<span class="op">~</span><span class="kw">as.factor</span>(Month), <span class="dt">data =</span> airquality)</a>
<a class="sourceLine" id="cb10-15" title="15"><span class="kw">summary</span>(my_aov)</a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co"># p-value is basically 0</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co"># Reject Ho. There is sufficient evidence to suggest there is at least one month that has a non-zero month. In other words, there is sufficient evidence to suggest that month has an affect on temperature. </span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="co"># You have to store it in an object and do summary the object</span></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co"># Residuals are normally distributed QQ plot, and scatterplot (residuals difference from mean (predicted)), effect how far off means are from grand mean???</span></a>
<a class="sourceLine" id="cb10-20" title="20"><span class="kw">plot</span>(my_aov, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>) If you don<span class="st">&#39;t put 1:2 one to two you&#39;</span>ll get <span class="dv">7</span></a>
<a class="sourceLine" id="cb10-21" title="21"><span class="co"># Looking for roughly the same spread, </span></a>
<a class="sourceLine" id="cb10-22" title="22"><span class="co"># To get a qq plot with boundaries</span></a>
<a class="sourceLine" id="cb10-23" title="23"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb10-24" title="24"><span class="kw">qqPlot</span>(my_aov<span class="op">$</span>residuals) <span class="co"># must have residuals plot</span></a>
<a class="sourceLine" id="cb10-25" title="25"><span class="co"># ANOVA is robust to violation of assumptions, the degree to which you violate the assumptions is the degree to which you should trust your p-value</span></a>
<a class="sourceLine" id="cb10-26" title="26"><span class="co"># Book walks through</span></a>
<a class="sourceLine" id="cb10-27" title="27"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) <span class="co"># Turns on a partition so you can see both at the same time</span></a>
<a class="sourceLine" id="cb10-28" title="28"><span class="kw">plot</span>(my_aov, <span class="dt">which =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-29" title="29"><span class="kw">qqPlot</span>(my_aov<span class="op">$</span>residuals)</a>
<a class="sourceLine" id="cb10-30" title="30"><span class="kw">boxplot</span>(Temp<span class="op">~</span><span class="kw">as.factor</span>(Month), <span class="dt">data=</span>airquality)</a>
<a class="sourceLine" id="cb10-31" title="31"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># Turns your partition off</span></a></code></pre></div>
<p>Benefits of 2 way ANOVA<br> Interaction<br> Ho: Alpha has no effect on y or Ho: a1 = a2 = 0<br> Ho: Beta has no effect on y or Ho: b1 = b2 = 0<br> One way more than one factors<br> 3 hypothesis 2 types of wool (levels)<br> does tension effect the breaks<br> Prefers the effects are all equals to zero<br> null effect of tension the same for all types of wool<br> The last one is number of combinations so 6 levels 6-1 is 5 then subtract the other Dfs down to 2. You can multiply the previous degrees of freedom to get degree of freedom<br> IMPORTANT: Before looking at the p-values of your test, it is always important to check the degrees of freedom of the test. Remember, degrees of freedom should be one less than the number of levels of the factor. If this is not the case, then use as.factor(…) to fix the problem.<br> This residual v fitted is about the maximum variation to accept<br> For each test make sure to have a section covering requirements maybe sub divide sections</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#?Blackmore</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="kw">View</span>(Blackmore)</a>
<a class="sourceLine" id="cb11-7" title="7">Blackmore<span class="op">$</span>ageGroup &lt;-<span class="st"> </span><span class="kw">cut</span>(Blackmore<span class="op">$</span>age, <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">14</span>,<span class="dv">18</span>), <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Youth&quot;</span>,<span class="st">&quot;Pre-Teen&quot;</span>,<span class="st">&quot;Early-Teen&quot;</span>,<span class="st">&quot;Late-Teen&quot;</span>), <span class="dt">ordered_result=</span><span class="ot">TRUE</span>) <span class="co">#includes 10, next includes 12</span></a>
<a class="sourceLine" id="cb11-8" title="8"></a>
<a class="sourceLine" id="cb11-9" title="9">Blackmore &lt;-<span class="st"> </span>Blackmore <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">ageGroup =</span> <span class="kw">case_when</span>(age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">8</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">10</span> <span class="op">~</span><span class="st"> &quot;Youth&quot;</span>,                                                    age <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">12</span> <span class="op">~</span><span class="st"> &quot;Pre-Teen&quot;</span>,</a>
<a class="sourceLine" id="cb11-11" title="11">                                                      age <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">14</span> <span class="op">~</span><span class="st"> &quot;Early-Teen&quot;</span>,</a>
<a class="sourceLine" id="cb11-12" title="12">                                                      age <span class="op">&gt;</span><span class="st"> </span><span class="dv">14</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">18</span> <span class="op">~</span><span class="st"> &quot;Late-Teen&quot;</span>),</a>
<a class="sourceLine" id="cb11-13" title="13">                <span class="dt">ageGroup =</span> <span class="kw">factor</span>(ageGroup, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Youth&quot;</span>, <span class="st">&quot;Pre-Teen&quot;</span>, <span class="st">&quot;Early-Teen&quot;</span>, <span class="st">&quot;Late-Teen&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb11-14" title="14"></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="kw">table</span>(Blackmore<span class="op">$</span>ageGroup)</a>
<a class="sourceLine" id="cb11-16" title="16">exercise.aov &lt;-<span class="st"> </span><span class="kw">aov</span>(exercise<span class="op">~</span>group <span class="op">+</span><span class="st"> </span>ageGroup <span class="op">+</span><span class="st"> </span>group<span class="op">:</span>ageGroup, <span class="dt">data=</span>Blackmore)</a>
<a class="sourceLine" id="cb11-17" title="17"><span class="kw">summary</span>(exercise.aov)</a>
<a class="sourceLine" id="cb11-18" title="18"></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="co"># test requirements</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb11-21" title="21"><span class="kw">plot</span>(exercise.aov, <span class="dt">which =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-22" title="22"><span class="co"># Remember: data points = n-1(data points - one should be the same as all degrees of freedom together)</span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="co"># 3 each factor and the interaction</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="kw">xyplot</span>(Blackmore<span class="op">$</span>exercise<span class="op">~</span>Blackmore<span class="op">$</span>group, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb11-25" title="25"><span class="kw">xyplot</span>(Blackmore<span class="op">$</span>exercise<span class="op">~</span>Blackmore<span class="op">$</span>ageGroup, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb11-26" title="26"><span class="kw">xyplot</span>(Blackmore<span class="op">$</span>exercise<span class="op">~</span>Blackmore<span class="op">$</span>group, <span class="dt">groups =</span> Blackmore<span class="op">$</span>group, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb11-27" title="27"><span class="kw">interaction.plot</span>(Blackmore<span class="op">$</span>ageGroup, Blackmore<span class="op">$</span>group, Blackmore<span class="op">$</span>exercise) <span class="co">#can be better</span></a>
<a class="sourceLine" id="cb11-28" title="28"><span class="co"># Anova and it&#39;s associated p-values are not reliable</span></a></code></pre></div>
<p><br> ##### Skills Quiz, ANOVA</p>
<p>Tip if having to determine patterns look at the interaction plot</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co"># One way ANOVA</span></a>
<a class="sourceLine" id="cb12-3" title="3">friendly.aov &lt;-<span class="st"> </span><span class="kw">aov</span>(correct<span class="op">~</span>condition, <span class="dt">data=</span>Friendly)</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">summary</span>(friendly.aov)</a>
<a class="sourceLine" id="cb12-5" title="5">            Df Sum Sq Mean Sq F value <span class="kw">Pr</span>(<span class="op">&gt;</span>F)  </a>
<a class="sourceLine" id="cb12-6" title="6">condition    <span class="dv">2</span>  <span class="fl">264.6</span>  <span class="fl">132.30</span>   <span class="fl">4.341</span> <span class="fl">0.0232</span> <span class="op">*</span></a>
<a class="sourceLine" id="cb12-7" title="7">Residuals   <span class="dv">27</span>  <span class="fl">822.9</span>   <span class="fl">30.48</span>                 </a>
<a class="sourceLine" id="cb12-8" title="8"><span class="op">---</span></a>
<a class="sourceLine" id="cb12-9" title="9">Signif. codes<span class="op">:</span><span class="st">  </span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="dv">0</span> ‘<span class="op">**</span><span class="er">*</span>’ <span class="fl">0.001</span> ‘<span class="op">**</span>’ <span class="fl">0.01</span> ‘<span class="op">*</span>’ <span class="fl">0.05</span> ‘.’ <span class="fl">0.1</span> ‘ ’ <span class="dv">1</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co"># Display side by side plots (req checks)</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb12-13" title="13"><span class="kw">plot</span>(friendly.aov, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-14" title="14"><span class="kw">xyplot</span>(correct<span class="op">~</span>condition, <span class="dt">data=</span>Friendly, <span class="dt">jitter.x=</span><span class="ot">TRUE</span>, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;p&quot;</span>, <span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb12-15" title="15">?ToothGrowth</a>
<a class="sourceLine" id="cb12-16" title="16"><span class="kw">View</span>(ToothGrowth)</a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co"># Check degrees of freedom to make sure correct and don&#39;t need to use as.factor</span></a>
<a class="sourceLine" id="cb12-18" title="18">my_aov &lt;-<span class="st"> </span><span class="kw">aov</span>(len <span class="op">~</span><span class="st"> </span>supp <span class="op">+</span><span class="st"> </span><span class="kw">as.factor</span>(dose) <span class="op">+</span><span class="st"> </span>supp<span class="op">:</span><span class="kw">as.factor</span>(dose), <span class="dt">data =</span> ToothGrowth)</a>
<a class="sourceLine" id="cb12-19" title="19"><span class="kw">summary</span>(my_aov)</a>
<a class="sourceLine" id="cb12-20" title="20">                     Df Sum Sq Mean Sq F value</a>
<a class="sourceLine" id="cb12-21" title="21">supp                  <span class="dv">1</span>  <span class="fl">205.4</span>   <span class="fl">205.4</span>  <span class="fl">15.572</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="kw">as.factor</span>(dose)       <span class="dv">2</span> <span class="fl">2426.4</span>  <span class="fl">1213.2</span>  <span class="fl">92.000</span></a>
<a class="sourceLine" id="cb12-23" title="23">supp<span class="op">:</span><span class="kw">as.factor</span>(dose)  <span class="dv">2</span>  <span class="fl">108.3</span>    <span class="fl">54.2</span>   <span class="fl">4.107</span></a>
<a class="sourceLine" id="cb12-24" title="24">Residuals            <span class="dv">54</span>  <span class="fl">712.1</span>    <span class="fl">13.2</span>        </a>
<a class="sourceLine" id="cb12-25" title="25">                       <span class="kw">Pr</span>(<span class="op">&gt;</span>F)    </a>
<a class="sourceLine" id="cb12-26" title="26">supp                 <span class="fl">0.000231</span> <span class="op">**</span><span class="er">*</span></a>
<a class="sourceLine" id="cb12-27" title="27"><span class="kw">as.factor</span>(dose)       <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></a>
<a class="sourceLine" id="cb12-28" title="28">supp<span class="op">:</span><span class="kw">as.factor</span>(dose) <span class="fl">0.021860</span> <span class="op">*</span><span class="st">  </span></a>
<a class="sourceLine" id="cb12-29" title="29">Residuals                        </a>
<a class="sourceLine" id="cb12-30" title="30"><span class="op">---</span></a>
<a class="sourceLine" id="cb12-31" title="31">Signif. codes<span class="op">:</span><span class="st">  </span></a>
<a class="sourceLine" id="cb12-32" title="32"><span class="dv">0</span> ‘<span class="op">**</span><span class="er">*</span>’ <span class="fl">0.001</span> ‘<span class="op">**</span>’ <span class="fl">0.01</span> ‘<span class="op">*</span>’ <span class="fl">0.05</span> ‘.’ <span class="fl">0.1</span> ‘ ’ <span class="dv">1</span></a>
<a class="sourceLine" id="cb12-33" title="33"><span class="co"># 3 needed graphs (one for each hyp)</span></a>
<a class="sourceLine" id="cb12-34" title="34"><span class="kw">xyplot</span>( len <span class="op">~</span><span class="st"> </span>supp, <span class="dt">data=</span>ToothGrowth, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>)) </a>
<a class="sourceLine" id="cb12-35" title="35"><span class="kw">xyplot</span>( len <span class="op">~</span><span class="st"> </span>dose, <span class="dt">data=</span>ToothGrowth, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb12-36" title="36"><span class="kw">xyplot</span>( len <span class="op">~</span><span class="st"> </span>supp, <span class="dt">data=</span>ToothGrowth, <span class="dt">groups=</span>dose, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>), <span class="dt">auto.key=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>Assessment Quiz <br></p>
</div>
<div id="kruskal-wallis-tests-week-6" class="section level4">
<h4>Kruskal-Wallis Tests, Week 6</h4>
<p>Kruskal-Wallis 3 or more for non-parametric<br> Testing 3 levels of a factor if data is in long form<br> comparing location of distribution<br> Use this hypothesis not the other one<br> Ho: Atll samples are form the same distribution<br> Ha: At east one sample’s distribution is stochastically different<br> Test statistic is H (is approximately a chi squared distribution with a C-1)<br> no requirement placed on the data<br> There isn’t a two-way Kruskal-Wallis<br> The way you calculate the statistic is more complicated than Wilcoxon (which was combinitorial)<br> It’s advtage over Wilcoxon can go into three groups. (Advantage of Wilcoxon you can test directionally, but ANOVA and Kruskal Wallis you can only test one way.)<br> 3 requirements You need a numerical summary, graphical summary, and test statistic. All of these will work with Y~X<br> No changes for this test of you have more than 3 levels<br></p>
<p>THIS————–&gt;Look over Wil and this and figure out the diff, Also add notes to front page para and no par If you have # Y, X ABC you ca use para = Anova (add link to your own case study), non-para Kruskal Wallis</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">kruskal.test</span>(correct<span class="op">~</span>condition, <span class="dt">data=</span>Friendly)</a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="kw">boxplot</span>(correct<span class="op">~</span>condition, <span class="dt">data=</span>Friendly)</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">favstats</span>(correct<span class="op">~</span>condition, <span class="dt">data=</span>Friendly) <span class="co"># need mosiac</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co"># (first is test statistic H)5.1817, df = 2, p-value = 0.07496</span></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb13-9" title="9"><span class="kw">View</span>(starwars)</a>
<a class="sourceLine" id="cb13-10" title="10">?starwars</a>
<a class="sourceLine" id="cb13-11" title="11"></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co"># drop droids since they aren&#39;t born anywhere</span></a></code></pre></div>
<div id="skills-quiz-kruskal-wallis-test" class="section level5">
<h5>Skills Quiz, Kruskal-Wallis Test</h5>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">dstarwars &lt;-<span class="st"> </span><span class="kw">filter</span>(starwars, species <span class="op">!=</span><span class="st"> &#39;Droid&#39;</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">kruskal.test</span>(height<span class="op">~</span>gender, <span class="dt">data =</span> dstarwars)</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">boxplot</span>(height<span class="op">~</span>gender, <span class="dt">data=</span>dstarwars)</a>
<a class="sourceLine" id="cb14-5" title="5"></a>
<a class="sourceLine" id="cb14-6" title="6"></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb14-8" title="8">?SaratogaHouses</a>
<a class="sourceLine" id="cb14-9" title="9"><span class="kw">View</span>(SaratogaHouses)</a>
<a class="sourceLine" id="cb14-10" title="10"><span class="kw">table</span>(SaratogaHouses<span class="op">$</span>fuel)</a>
<a class="sourceLine" id="cb14-11" title="11"><span class="kw">kruskal.test</span>(price<span class="op">~</span>fuel, <span class="dt">data=</span>SaratogaHouses)</a>
<a class="sourceLine" id="cb14-12" title="12"><span class="kw">boxplot</span>(price<span class="op">~</span>heating, <span class="dt">data=</span>SaratogaHouses)</a>
<a class="sourceLine" id="cb14-13" title="13"><span class="kw">stripchart</span>(price<span class="op">~</span>heating, <span class="dt">data=</span>SaratogaHouses)</a>
<a class="sourceLine" id="cb14-14" title="14">SaratogaHouses <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(fuel) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">Median =</span> <span class="kw">median</span>(price))</a>
<a class="sourceLine" id="cb14-15" title="15"><span class="kw">summary</span>(SaratogaHouses)</a></code></pre></div>
<p>C = The number of samples being compared<br> ni=The size of sample<br> N= The total number of observations<br> Ri=The sum of the Ranks belonging to sample i<br> Rbari= The mean of the ranks of each sample i<br> H=test statistic (how much ranks differ from the mean)<br> INCLUDE ALL TEST Statistics!<br></p>
</div>
<div id="assessment-quiz-3" class="section level5">
<h5>Assessment Quiz</h5>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">library</span>(mosaic)  </a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="kw">View</span>(Salaries)</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="kw">kruskal.test</span>(salary<span class="op">~</span>rank, <span class="dt">data=</span>Salaries)</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="kw">boxplot</span>(salary<span class="op">~</span>rank, <span class="dt">data=</span>Salaries)</a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co"># H of the kruskal-Wallis can be described as a combined measurement of how muth the average ranks differ between each group.</span></a></code></pre></div>
<p><br></p>
</div>
</div>
<div id="simple-linear-regression-week-7" class="section level4">
<h4>Simple Linear Regression, Week 7</h4>
<p>Y (dependant) is the variable you’re trying to predict. X is the explanatory (independent variable)<br> Simple Linear Regression<br> Simple Ordinary Least Squares Regression (1 x, 1 y)<br> Ordinary Least-Squares Regression (Broader) (* x, 1 y)<br> Simple Linear Reqression (most common)<br> Linear Regression<br> If you’re in an interview OLS regression<br> The “Best Fit” Line minimizes the sum of the distances from the points to the line<br> How do we define distance?<br> We use vertical distance because we’re trying to predict the Y. We square the distances so the negatives go away. The sum of squares, we add the area of the squares<br></p>
<p>The True regression line is<br> It’s the true mean<br> We can be condfident in a point estimate only a condifidence interval<br> Epsilon is the error term or residual</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb16-2" title="2">?cars</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="kw">plot</span>(cars<span class="op">$</span>dist <span class="op">~</span><span class="st"> </span>cars<span class="op">$</span>speed)</a>
<a class="sourceLine" id="cb16-4" title="4"></a>
<a class="sourceLine" id="cb16-5" title="5">create my linear modemappl, </a>
<a class="sourceLine" id="cb16-6" title="6"><span class="kw">lm</span>(cars<span class="op">$</span>dist <span class="op">~</span><span class="st"> </span>cars<span class="op">$</span>speed)</a>
<a class="sourceLine" id="cb16-7" title="7">car_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(cars<span class="op">$</span>dist<span class="op">~</span>cars<span class="op">$</span>speed)</a>
<a class="sourceLine" id="cb16-8" title="8"><span class="kw">summary</span>(car_mod)</a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co"># in the examples the formula on cars example came from the summary</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co"># If I want to add aline</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="kw">abline</span>(<span class="dt">reg =</span> car_mod)</a>
<a class="sourceLine" id="cb16-12" title="12"><span class="kw">abline</span> (<span class="dt">a =</span> <span class="fl">-17.5781</span>, b <span class="op">/</span><span class="st"> </span><span class="fl">3.9324</span>, <span class="dt">col =</span> blue) <span class="co">#the same</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co"># ggplot ex</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="kw">ggplot</span>(<span class="dt">data=</span>cars, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>speed, <span class="dt">y=</span>dist)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>geom <span class="kw">smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) <span class="co"># last part removes the error bands</span></a>
<a class="sourceLine" id="cb16-15" title="15"></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co"># in analyses use cars thing to write out Ysub i = beto o etc.. p value for speed is less than .o5 Then I sate what the fitted model is thats the a17.58 part Say hence relation ship is real (not meaningful like example) Then write out the relationship Assuming the model is appropriate.... should say on average which sample doesn&#39;t You can see from the plot focused on the model</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="kw">plot</span>(car_mod, <span class="dt">which=</span><span class="dv">1</span>)<span class="co"># don&#39;t look at red line just look at points some concern here looks like the variance may be growing (not constant), Linear looks good (Make sure you teach him to read them in your analysis), there&#39;s no bends looking for constant variance as move lt to rt it seems to increase this assumption may be violated</span></a>
<a class="sourceLine" id="cb16-18" title="18">car<span class="op">::</span><span class="kw">qqplot</span>(car_mod<span class="op">$</span>residuals) <span class="co">#explain why this is met</span></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="kw">plot</span>(car_mod<span class="op">$</span>residuals) <span class="co"># order plot? num 5 no distinct pattern or trend in the plot, I think assumpt num 5 that each _ is _ has been met</span></a></code></pre></div>
<p>Remember you can look at the code to see how to do it<br> 4 of assumptions (Maybe we assume that ____whatever 4 is because we can not check it directly)<br> If pattern showing in num 5 check your data, maybe there’s something missing in your model, if there’s something different on say day 5 you can add something for day of the week<br> This weeks analysis, State model and the terms of the model(know terms) Can state it either way in cars with nums stopping speed or all mahe way, state assumptions, hypothesis test (do even if you don’t meet the requirements tell me but going to do it anyway)<br> diffence between diagnostic plot and graphic–graphic illustrate the data, diagonstic show whether meet assumptions<br> How do you use math chunks, you can use the LaTex code<br> Why important to include the simple linear regression model along with your hypothesis–He and maybe you wont’ know how the model is pieced together<br> How interpret the value for the slope and intercept (slope is change in ave value of y), y is mean x when y is zero<br></p>
<div id="skills-quiz-simple-linear-regression" class="section level5">
<h5>Skills Quiz, Simple Linear Regression</h5>
<p>List where the Linear Regression parts can be found<br> Linear Regression (Under “Making Inference” on your webpage menu)<br> Explanation (for Simple Linear Regression)<br> R Instructions (for Simple Linear Regression)<br> Examples: bodyweight (for Simple Linear Regression)<br> Examples: cars (for Simple Linear Regression)<br> NOTES NEED TO HAVE WHICH PLOT FOR WHICH ASSUMPTION!<br> Requirement/How to Check/“Hot dog”<br> 1 Linear Relationship/Scatterplot/Hot dog (double check hot dog)<br> 1 Linear Relationship(partB)/Residual Plot/No pattern in residuals<br> 2 Normal Error Term/Q-QPlot of the Residuals/Points in the QQplot close to line<br> 3 Constant Variance/Residual Plot/No megaphone shape in residuals<br> 4 X’s are Known Constants/Cannot be checked directly<br> 5 Obervations are Independant/Partially checked with a residuals vs. order plot/No pattern in residuals perform simple linear regression<br></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">plot</span>(Height<span class="op">~</span>Volume, <span class="dt">data=</span>trees)</a>
<a class="sourceLine" id="cb17-2" title="2">trees.lm&lt;-<span class="kw">lm</span>(Height<span class="op">~</span>Volume, <span class="dt">data=</span>trees)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">abline</span>(trees.lm)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#Check assumptions</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb17-6" title="6"><span class="kw">plot</span>(trees.lm, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>) <span class="co"># reverse megaphone, not close to line, answer says it violates Normal Errors, Constant Variance, and Linear Relation</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co">#This resets your potting window for future plots</span></a></code></pre></div>
<p>The residuals vs. fitted values plot diagnoses the constant variance and Linear Relation assumptions<br> (independent observations are checked by residuals vs. order) par(mfrow=c(1,3))<br> QQplot diagnoses the Normal Errors assumption plot(mylim, which=1:2)<br> Residuals v Order diagnoses Independent Errors plot(mylm$residuals)<br></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># BE CAREFUL WITH LINEAR REGRESSION</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="co"># Perform a simple linear regression to determine if the expected wating time to the next eruption (this goes in first position) can be modeled by the previous eruption (this goes in second position)</span></a>
<a class="sourceLine" id="cb18-3" title="3">?faithful</a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="kw">plot</span>(waiting<span class="op">~</span>eruptions, <span class="dt">data=</span>faithful)</a>
<a class="sourceLine" id="cb18-6" title="6">oldfaithful.lm&lt;-<span class="kw">lm</span>(waiting<span class="op">~</span>eruptions, <span class="dt">data=</span>faithful)</a>
<a class="sourceLine" id="cb18-7" title="7"><span class="kw">abline</span>(oldfaithful.lm)</a>
<a class="sourceLine" id="cb18-8" title="8"><span class="kw">summary</span>(oldfaithful.lm)</a>
<a class="sourceLine" id="cb18-9" title="9"></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co"># Check assumptions</span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb18-12" title="12"><span class="kw">plot</span>(oldfaithful.lm, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb18-13" title="13"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb18-14" title="14">    <span class="co"># For this one the answer said the errors appear to be normally distributed and we can assume the variance of the errors is constant, and appears appropriate to use the model </span></a></code></pre></div>
</div>
<div id="assessment-quiz-4" class="section level5">
<h5>Assessment Quiz</h5>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb19-2" title="2">?KidsFeet</a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">plot</span>(length<span class="op">~</span>width, <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb19-4" title="4">feet.lm&lt;-<span class="kw">lm</span>(length<span class="op">~</span>width, <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb19-5" title="5"><span class="kw">abline</span>(feet.lm)</a>
<a class="sourceLine" id="cb19-6" title="6"><span class="kw">summary</span>(feet.lm)</a></code></pre></div>
<p><br></p>
</div>
</div>
<div id="multiple-linear-regression-week-8" class="section level4">
<h4>Multiple Linear Regression, Week 8</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># Example from cars</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co"># you are entering the x&#39;s not the Beta&#39;s (similar to the Anova/model is written the same way)</span></a>
<a class="sourceLine" id="cb20-3" title="3">lm<span class="fl">.2</span>lines &lt;-<span class="kw">lm</span>(mpg<span class="op">~</span>qsec <span class="op">+</span><span class="st"> </span>am <span class="op">+</span><span class="st"> </span>qsec<span class="op">:</span>am, <span class="dt">data=</span>mtcars) (B3)</a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co"># qsec slope when B is0</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co"># am change changedFiles(qsec:am) the slope is qsec plus the qsec:am</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co"># run palette before plot if you want it loaded</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;skyblue&quot;</span>, <span class="st">&quot;firebrick&quot;</span>))</a>
<a class="sourceLine" id="cb20-8" title="8">mymod &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg<span class="op">~</span>qsec <span class="op">+</span><span class="st"> </span>am <span class="op">+</span><span class="st"> </span>qsec<span class="op">:</span>am, <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb20-9" title="9"><span class="kw">summary</span>(mymod)</a>
<a class="sourceLine" id="cb20-10" title="10"><span class="kw">plot</span>(mpg<span class="op">~</span>qsec, <span class="dt">col=</span><span class="kw">factor</span>(am), <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co"># store coefficients of model in a vector and name it</span></a>
<a class="sourceLine" id="cb20-12" title="12">b &lt;-<span class="st"> </span>mymod<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co"># best fit line when x2 = 0</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="kw">abline</span>(<span class="dt">a=</span> b[<span class="dv">1</span>], <span class="dt">b=</span>b[<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;skyblue&quot;</span>)</a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co"># best fit line when x1=0, remember to add the change to the original!!!!</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="kw">abline</span>(<span class="dt">a=</span> b[<span class="dv">3</span>]<span class="op">+</span>b[<span class="dv">1</span>], <span class="dt">b=</span>b[<span class="dv">4</span>]<span class="op">+</span>b[<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>)</a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co"># diagnose if appropriate</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="kw">plot</span>(mymod, <span class="dt">which=</span><span class="dv">1</span>) <span class="co"># linear and constant variance assumptions appear met/should not be an obvious pattern in the data points and should be about constant top to bottom not megaphone shape, not following a curve</span></a>
<a class="sourceLine" id="cb20-19" title="19">car<span class="op">::</span><span class="kw">qqPot</span>(mymod<span class="op">$</span>residuals)</a>
<a class="sourceLine" id="cb20-20" title="20"><span class="co"># looks pretty good one or two outside but not overly concerned</span></a>
<a class="sourceLine" id="cb20-21" title="21"><span class="kw">plot</span>(mtcars<span class="op">$</span>mpg) <span class="co"># no strong patterns, use the y!</span></a></code></pre></div>
<p>Use summary to do hypothesis test<br> Null hypothesis for intercept pr(t) is not interesting Bnaught, 2nd tells whether reference line = slope of zero (not too interested), what I really want to know is the last one, does the transmission have effect on the slope and maybe 3rd does transmission have effect on mpg, if playing by the rulles really strictly, therei’s insufficient (or marginal)evidenc to suggest transmission on slope (4th), Does transmission have an effect on mpg(this is the third in the list), insufficient (BTW, the second is the simple linear regression)<br> Estimate Std. Error t value Pr(&gt;|t|) (Intercept) -9.0099 8.2179 -1.096 0.28226<br> qsec 1.4385 0.4500 3.197 0.00343 **<br> am -14.5107 12.4812 -1.163 0.25481<br> qsec:am 1.3214 0.7017 1.883 0.07012<br> Classroom activity quiz<br> Seems a bit confusing:<br> In class Y=(Bo + B2)+(B1 + B3)<br> When calculating Yi values use the model not the slope formula above<br></p>
<div id="indices" class="section level5">
<h5>Indices</h5>
<p>In code Y=([1]+[3])+([2]+[4]) using lm$coefficient indices<br> If no beta2 both have same intercept therefore<br> No beta2 Y=([1]+0)+([2]+[3]) not using a beta lowers the # of indices<br> No beta3 Y=([1]+[3])+([2]+0) indices<br></p>
</div>
<div id="no-beta-2-example" class="section level5">
<h5>No Beta 2 example</h5>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;skyblue&quot;</span>,<span class="st">&quot;firebrick&quot;</span>))</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">plot</span>(mpg <span class="op">~</span><span class="st"> </span>qsec, <span class="dt">data=</span>mtcars, <span class="dt">col=</span><span class="kw">as.factor</span>(am), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">30</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">30</span>,<span class="dv">40</span>), <span class="dt">main=</span><span class="st">&quot;1974 Motor Trend Cars&quot;</span>, <span class="dt">pch=</span><span class="dv">16</span>)</a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co"># same intercept--Notice in the summary that beta2 (am) is not significant--rewrite the model so beta2 is not used, REMEMBER INDICES=3! Y=([1]+0)+([2]+[3])</span></a>
<a class="sourceLine" id="cb21-4" title="4">nobeta2&lt;-<span class="kw">lm</span>(mpg<span class="op">~</span>qsec <span class="op">+</span><span class="st"> </span>qsec<span class="op">:</span>am, <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb21-5" title="5"><span class="kw">summary</span>(nobeta2)</a>
<a class="sourceLine" id="cb21-6" title="6"><span class="kw">abline</span>(<span class="dt">a=</span> nobeta2<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span> nobeta2<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb21-7" title="7"><span class="kw">abline</span>(<span class="dt">a=</span> nobeta2<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span>  nobeta2<span class="op">$</span>coefficients[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>nobeta2<span class="op">$</span>coefficients[<span class="dv">3</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">2</span>])</a></code></pre></div>
</div>
<div id="no-beta-3-example" class="section level5">
<h5>No beta 3 example</h5>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co"># parallel lines--Notice beta3 is not significant--rewrite the model so beta3 (qsec:am) is not used, REMEMBER INDICES=3! Y=([1]+[3])+([2]+0)</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;skyblue&quot;</span>,<span class="st">&quot;firebrick&quot;</span>))</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="kw">plot</span>(mpg <span class="op">~</span><span class="st"> </span>qsec, <span class="dt">data=</span>mtcars, <span class="dt">col=</span><span class="kw">as.factor</span>(am), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">30</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">30</span>,<span class="dv">40</span>), <span class="dt">main=</span><span class="st">&quot;1974 Motor Trend Cars&quot;</span>, <span class="dt">pch=</span><span class="dv">16</span>)</a>
<a class="sourceLine" id="cb22-4" title="4">nobeta3&lt;-<span class="kw">lm</span>(mpg<span class="op">~</span>qsec <span class="op">+</span><span class="st"> </span>am, <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb22-5" title="5"><span class="kw">summary</span>(nobeta3)</a>
<a class="sourceLine" id="cb22-6" title="6"><span class="kw">abline</span>(<span class="dt">a=</span> nobeta3<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span>nobeta3<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb22-7" title="7"><span class="kw">abline</span>(<span class="dt">a=</span>nobeta3<span class="op">$</span>coefficients[<span class="dv">1</span>]<span class="op">+</span>nobeta3<span class="op">$</span>coefficients[<span class="dv">3</span>], <span class="dt">b=</span>nobeta3<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">2</span>])</a></code></pre></div>
</div>
<div id="full-model-example" class="section level5">
<h5>Full model example</h5>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="co"># Full/diff slopes &amp; diff intercepts--Notice full uses everything, REMEMBER INDICES=4! Y=([1]+[3])+([2]+[4])</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;skyblue&quot;</span>,<span class="st">&quot;firebrick&quot;</span>))</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">plot</span>(mpg <span class="op">~</span><span class="st"> </span>qsec, <span class="dt">data=</span>mtcars, <span class="dt">col=</span><span class="kw">as.factor</span>(am), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">30</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">30</span>,<span class="dv">40</span>), <span class="dt">main=</span><span class="st">&quot;1974 Motor Trend Cars&quot;</span>, <span class="dt">pch=</span><span class="dv">16</span>)</a>
<a class="sourceLine" id="cb23-4" title="4">full&lt;-<span class="kw">lm</span>(mpg<span class="op">~</span>qsec <span class="op">+</span><span class="st"> </span>am <span class="op">+</span><span class="st"> </span>qsec<span class="op">:</span>am, <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb23-5" title="5"><span class="kw">summary</span>(nobeta3)</a>
<a class="sourceLine" id="cb23-6" title="6"><span class="kw">abline</span>(<span class="dt">a=</span> full<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span>full<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb23-7" title="7"><span class="kw">abline</span>(<span class="dt">a=</span>full<span class="op">$</span>coefficients[<span class="dv">1</span>]<span class="op">+</span>full<span class="op">$</span>coefficients[<span class="dv">3</span>], <span class="dt">b=</span>full<span class="op">$</span>coefficients[<span class="dv">2</span>]<span class="op">+</span>full<span class="op">$</span>coefficients[<span class="dv">4</span>], <span class="dt">col=</span><span class="kw">palette</span>()[<span class="dv">2</span>])</a></code></pre></div>
</div>
<div id="legend" class="section level5">
<h5>Legend</h5>
<p>legend(“topleft”, legend=c(“automatic”,“manual”), pch=1, col=palette(), title=“Transmission (am)”, bty=“n”)</p>
</div>
<div id="skills-quiz-multiple-linear-regression" class="section level5">
<h5>Skills Quiz, Multiple Linear Regression</h5>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">?SaratogaHouses</a>
<a class="sourceLine" id="cb24-2" title="2"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb24-3" title="3"></a>
<a class="sourceLine" id="cb24-4" title="4">SH2&lt;-<span class="kw">filter</span>(SaratogaHouses, bedrooms<span class="op">==</span><span class="dv">3</span>, newConstruction<span class="op">==</span><span class="st">&quot;Yes&quot;</span>)</a>
<a class="sourceLine" id="cb24-5" title="5"><span class="kw">View</span>(SH2)</a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7">SHmod&lt;-<span class="kw">lm</span>(price<span class="op">~</span>livingArea <span class="op">+</span><span class="st"> </span>fireplaces <span class="op">+</span><span class="st"> </span>livingArea<span class="op">:</span>fireplaces, <span class="dt">data=</span>SH2)</a>
<a class="sourceLine" id="cb24-8" title="8"><span class="kw">summary</span>(SHmod)</a>
<a class="sourceLine" id="cb24-9" title="9"><span class="kw">plot</span>(price<span class="op">~</span>livingArea, <span class="dt">data=</span>SH2, <span class="dt">col=</span><span class="kw">as.factor</span>(livingArea))</a>
<a class="sourceLine" id="cb24-10" title="10"><span class="kw">abline</span>(<span class="dt">a=</span> SHmod<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span>SHmod<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;yellow&quot;</span>)</a>
<a class="sourceLine" id="cb24-11" title="11"><span class="kw">abline</span>(<span class="dt">a=</span>SHmod<span class="op">$</span>coefficients[<span class="dv">1</span>]<span class="op">+</span>SHmod<span class="op">$</span>coefficients[<span class="dv">3</span>], <span class="dt">b=</span>SHmod<span class="op">$</span>coefficients[<span class="dv">2</span>]<span class="op">+</span>SHmod<span class="op">$</span>coefficients[<span class="dv">4</span>], <span class="dt">col=</span> <span class="st">&quot;skyblue&quot;</span>)</a>
<a class="sourceLine" id="cb24-12" title="12"></a>
<a class="sourceLine" id="cb24-13" title="13">SHmod&lt;-<span class="kw">lm</span>(price<span class="op">~</span>livingArea <span class="op">+</span><span class="st"> </span>livingArea<span class="op">:</span>fireplaces, <span class="dt">data=</span>SH2)</a>
<a class="sourceLine" id="cb24-14" title="14"><span class="kw">summary</span>(SHmod)</a>
<a class="sourceLine" id="cb24-15" title="15"><span class="kw">plot</span>(price<span class="op">~</span>livingArea, <span class="dt">data=</span>SH2, <span class="dt">col=</span><span class="kw">as.factor</span>(livingArea))</a>
<a class="sourceLine" id="cb24-16" title="16"><span class="kw">abline</span>(<span class="dt">a=</span> SHmod<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span> SHmod<span class="op">$</span>coefficients[<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;yellow&quot;</span>)</a>
<a class="sourceLine" id="cb24-17" title="17"><span class="kw">abline</span>(<span class="dt">a=</span> SHmod<span class="op">$</span>coefficients[<span class="dv">1</span>], <span class="dt">b=</span>  SHmod<span class="op">$</span>coefficients[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>SHmod<span class="op">$</span>coefficients[<span class="dv">3</span>], <span class="dt">col=</span><span class="st">&quot;skyblue&quot;</span>)</a>
<a class="sourceLine" id="cb24-18" title="18"></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb24-20" title="20"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb24-21" title="21"><span class="kw">plot</span>(SHmod, <span class="dt">which=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb24-22" title="22"><span class="kw">qqPlot</span>(SHmod<span class="op">$</span>residuals, <span class="dt">id=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-23" title="23"><span class="kw">plot</span>(SHmod<span class="op">$</span>residuals)</a>
<a class="sourceLine" id="cb24-24" title="24"></a>
<a class="sourceLine" id="cb24-25" title="25"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb24-26" title="26">?Highway1</a>
<a class="sourceLine" id="cb24-27" title="27"><span class="kw">View</span>(Highway1)</a>
<a class="sourceLine" id="cb24-28" title="28">ratemod&lt;-<span class="kw">lm</span>(<span class="dt">formula =</span> rate <span class="op">~</span><span class="st"> </span>slim <span class="op">+</span><span class="st"> </span>shld <span class="op">+</span><span class="st"> </span>trks, <span class="dt">data=</span>Highway1)</a>
<a class="sourceLine" id="cb24-29" title="29"><span class="kw">summary</span>(ratemod)</a>
<a class="sourceLine" id="cb24-30" title="30"><span class="kw">plot</span>(ratemod, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-31" title="31"></a>
<a class="sourceLine" id="cb24-32" title="32"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb24-33" title="33">?mpg</a>
<a class="sourceLine" id="cb24-34" title="34"><span class="kw">View</span>(mpg)</a>
<a class="sourceLine" id="cb24-35" title="35"></a>
<a class="sourceLine" id="cb24-36" title="36"><span class="kw">plot</span>(hwy <span class="op">~</span><span class="st"> </span>cty, <span class="dt">data =</span> mpg)</a>
<a class="sourceLine" id="cb24-37" title="37">mpg.lm &lt;-<span class="st"> </span><span class="kw">lm</span>(hwy <span class="op">~</span><span class="st"> </span>cty, <span class="dt">data=</span>mpg)</a>
<a class="sourceLine" id="cb24-38" title="38"></a>
<a class="sourceLine" id="cb24-39" title="39"><span class="kw">summary</span>(mpg.lm)</a>
<a class="sourceLine" id="cb24-40" title="40"></a>
<a class="sourceLine" id="cb24-41" title="41"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)); <span class="kw">plot</span>(mpg.lm, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-42" title="42"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb24-43" title="43"></a>
<a class="sourceLine" id="cb24-44" title="44"><span class="kw">plot</span>(mpg.lm<span class="op">$</span>residuals <span class="op">~</span><span class="st"> </span>cyl , <span class="dt">data=</span>mpg)</a>
<a class="sourceLine" id="cb24-45" title="45"></a>
<a class="sourceLine" id="cb24-46" title="46"><span class="kw">plot</span>(mpg.lm<span class="op">$</span>residuals <span class="op">~</span><span class="st"> </span><span class="kw">as.factor</span>(drv), <span class="dt">data=</span>mpg)</a>
<a class="sourceLine" id="cb24-47" title="47"></a>
<a class="sourceLine" id="cb24-48" title="48"><span class="kw">plot</span>(mpg.lm<span class="op">$</span>residuals <span class="op">~</span><span class="st"> </span>displ, <span class="dt">data=</span>mpg)</a>
<a class="sourceLine" id="cb24-49" title="49"></a>
<a class="sourceLine" id="cb24-50" title="50">mpg.lm &lt;-<span class="st"> </span><span class="kw">lm</span>(hwy <span class="op">~</span><span class="st"> </span>cty <span class="op">+</span><span class="st"> </span>drv, <span class="dt">data=</span>mpg)</a>
<a class="sourceLine" id="cb24-51" title="51"></a>
<a class="sourceLine" id="cb24-52" title="52"><span class="kw">summary</span>(mpg.lm)</a></code></pre></div>
<p>Optional: To verify this result, see if you can use mPlot(mpg) to visually recreate a near depiction this regression. Email your code to your instructor to see how you did. Doing this will help you on your Analysis for this week and is recommended even though it is optional.</p>
</div>
<div id="assessment-quiz-5" class="section level5">
<h5>Assessment Quiz</h5>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">View</span>(Orange)</a>
<a class="sourceLine" id="cb25-2" title="2">orangemod&lt;-<span class="kw">lm</span>(Orange<span class="op">$</span>circumference<span class="op">~</span>Orange<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb25-3" title="3"><span class="kw">summary</span>(orangemod)</a>
<a class="sourceLine" id="cb25-4" title="4"><span class="kw">plot</span>(Orange<span class="op">$</span>circumference<span class="op">~</span>Orange<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb25-5" title="5"><span class="kw">abline</span>(orangemod)</a>
<a class="sourceLine" id="cb25-6" title="6"><span class="kw">predict</span>(orangemod, <span class="kw">data.frame</span>(<span class="dt">tree=</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co">#abline(oangemod)</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb25-9" title="9"><span class="kw">plot</span>(orangemod, <span class="dt">which=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb25-10" title="10"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb25-11" title="11"></a>
<a class="sourceLine" id="cb25-12" title="12">kids.lm &lt;-<span class="st"> </span><span class="kw">lm</span>(length <span class="op">~</span><span class="st"> </span>width <span class="op">+</span><span class="st"> </span><span class="kw">as.factor</span>(birthyear), <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb25-13" title="13"><span class="kw">summary</span>(kids.lm)</a>
<a class="sourceLine" id="cb25-14" title="14"><span class="co"># Which of the following correctly interprets the results of this regression?</span></a>
<a class="sourceLine" id="cb25-15" title="15"><span class="co"># Answer: Because the p-value of Beta2 is insignificant, the two lines should just be one line.</span></a></code></pre></div>
<p><br></p>
</div>
</div>
<div id="practice-final-1-week-9" class="section level4">
<h4>Practice Final 1, Week 9</h4>
<p>1 x <strong>Medians</strong> equal wilcox oops<br> 2 Continue to believ the logistic regression was appropriate<br> 3 x p-value for Kruskal add up observations to the right of the line divide by total number<br> 4 x Check the normality before deciding which test is appropriate should have been Kruskal<br> 5 x billing period if it’s a column header it’s not what a row represents<br> 6 x if the line is curved then Xi is used twice so temp and temp 2<br> 7 hot summer cold winter<br> 8 no significant difference in slopes, p-value = .8883<br> 9 x two qualitative variables (no quant) use CHI squared<br> 10 if they ask for recommendation consider using a five number summary rather than viewing the data<br> 11 use histogram<br> 12 yes anova<br> 13 charged 10.9 cents/kwh<br> 14 x Remember, the two things needed to get a p-value are a test statistic, in this case a chi-squared statistic equal to 4.9575, and a distribution of the test statistic, in this case a chi-squared distribution with 2 degrees of freedom, i.e., df=2. Going to the “Making Inference” page of the textbook and looking up the chi-squared distribution with 2 degrees of freedom, we see the value of 5 isn’t too likely, but has some height to the curve above that value. Looking out to the right, we might guess around 5% or so for the p-value, and since 0.0838 is the only value close to that, we guess that as our answer.<br> 15 x predicting on a curve<br> kids.glm &lt;- glm(birthyear==88 ~ length, data=KidsFeet, family=binomial)<br> predict(kids.glm, data.frame(length=26), type=“response”)<br> 16 p-value = .995<br> 17 x Using e^b1, exp(-0.014717) = 0.9853908, shows that the odds are 98.54% of what they were for every 1 unit increase in X. This means the odds are decreasing by 1-0.9853908 = 0.01460923, or 1.46%.<br> 18 linear<br> 19 Kruskal<br> 20 x chi-squared not appropriate because there are quantative variable for which test questions draw the image and compare<br> 21 boxplot low high<br> 22 However, since it is a logistic regression, then we are using a quantitative x-variable (birth weight in this case) to predict a binomial outcome (whether or not the mother smoked in this case). Thus, the correct answer would be “Can the birth weight of the child predict whether or not the mother smoked during the pregnancy?”<br> 23 barplot could have been easier<br> table(KidsFeet<span class="math inline">\(sex, KidsFeet\)</span>birthmonth)<br> 24 t stat &amp; dist<br> 25 faster= mean(length~sex, data=subset(KidsFeet, birthmonth==1))<br> <br></p>
</div>
<div id="logistic-regression-week-10" class="section level4">
<h4>Logistic Regression, Week 10</h4>
<p>Probability that we get a success given(|) the number fro xi. We exponentioate the expression). We represent the result with a pi. We still have bnaught and b1 but diff to interpret, When we evaluate the exponetialization of the line we learn interesting things about the probability.<br> B for every 1 degree in crease in temp the increase in odds. If beta 1 = 0 there is no effect. if it’s not (there is a slope)<br></p>
<p>Remember to include the equation with e and the line results<br> If there’s a lot of overplotting change the alpha (transparency)<br> plot(y~x, data=data)#can add label pcu<br> curve(exp(Bnaught+B1x)/(1+exp(Bnaught+B1)))<br> can use coefficients<br> curve((exp(-\15.04-.2322*x+ so on , add=TRUE)))<br> don’t need to use numbers can hardcode<br> eponentiate = e raised to a power<br> Run a hypothesis test to test whether the model is valid<br> H0 the model is good fit<br> Ha the model is not a good fit (if you reject the null, you shouldn’t use the test)<br> Deviance Goodness of Fit Test you have 3 or 4 levels<br> most of the time you’ll run the Hosmer-Lemeshow Goodness of Fit test, must use library(ResourceSelection), the g was 6 because there wasn’t a lot of data, often 10 first 10 percentile of data then the next 10 percent divide data into 10 chunks, compare it to the predicted value. Default is 10. generally the more groups the better. (Problem you can alter the groups to give whatever results you want)<br> p &gt; than .05 fail to reject insufficient evidenc that it’s a bad fit the other test, use residual deviance and the degrees of freedom. P value high then not enough evidence is to reject the glm test<br> if the pvalue of the requirements test is low then we reject the model<br> exp(-.2322)<br></p>
<div id="phrasing-the-prediction" class="section level5">
<h5>Phrasing the prediction</h5>
<p>For every one degree warmer in F, the odds of an o-ring failure change by a factor of .79(answer for the exp(B1))The odds of an o-ring failure decrease by 21% (multiply the b1 by 100)<br> use .glm in name so predict can tell by the end that the class<br> must be a dataframe<br> predict(model, newdata=data.frame(Temp=31), type = ‘response’)<br> It’s the linear model for the log odds<br> response type is a probability prediction<br> in the explanaton always exponentiate the answer<br></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb26-3" title="3">?KidsFeet</a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co"># Don&#39;t have to have the yes= and no=, can nest an ifelse other mutate example ifelse(myvar == &quot;Yes&quot;, 1, 0)</span></a>
<a class="sourceLine" id="cb26-5" title="5"></a>
<a class="sourceLine" id="cb26-6" title="6">kf &lt;-<span class="st"> </span>KidsFeet <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sexb =</span> <span class="kw">ifelse</span>(sex<span class="op">==</span><span class="st">&quot;B&quot;</span>, <span class="dt">yes=</span><span class="dv">1</span>, <span class="dt">no=</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb26-8" title="8"><span class="kw">View</span>(kf)</a>
<a class="sourceLine" id="cb26-9" title="9"><span class="co"># generalizedlogistic model</span></a>
<a class="sourceLine" id="cb26-10" title="10">my.glm&lt;-<span class="kw">glm</span>(<span class="dt">data=</span>kf, sexb<span class="op">~</span>length, <span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co"># the plot will go i order so 0 first</span></a>
<a class="sourceLine" id="cb26-12" title="12"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;pink&quot;</span>, <span class="st">&quot;skyblue&quot;</span>))</a>
<a class="sourceLine" id="cb26-13" title="13"><span class="kw">plot</span>(sexb<span class="op">~</span>length, <span class="dt">data=</span>kf, <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">main=</span><span class="st">&quot;KidsFeet Logistic Regression&quot;</span>, <span class="dt">col =</span> <span class="kw">factor</span>(sexb))</a>
<a class="sourceLine" id="cb26-14" title="14"><span class="co"># doing it this way gives more precision over hard coding</span></a>
<a class="sourceLine" id="cb26-15" title="15">b&lt;-<span class="st"> </span>my.glm<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb26-16" title="16"><span class="kw">curve</span>(<span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)), <span class="dt">add=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb26-17" title="17">b</a></code></pre></div>
<p>Pay attention here, predict the probability for a child being male if their foot length is 25cm (this is not the observed probability more like the mean) This alone is the log odds, must add response to get the probability Predict can give more info predict(my.glm, newdata=data.frame(length =25), type=“response”) or this just gives the prob x=25 <code>{r. eval=FALSE} exp(b[1]+b[2]*x)/(1+exp(b[1]+b[2]*x))</code> The estimated value of e raised to <span class="math inline">\(\beta_1\)</span> is (remember we don’t interpret the B1 just the eporentiated B1) For every 1 unit increase in footlength the odds of being a boy are multiplied by 1.66. or For every 1 unit increase i footlength, the odds of being a boy grow by 66% or odds of being a boy change by a factor of 1.66. odds of two to one the odds of it occuring is twice as likely as it not occuring LOOK UP ODDS and what e to the B1 means online!!!! every unit increase in x the quantity will grow by 1.66 (multiply by 1.66) summary(my.glm)</p>
</div>
<div id="skills-quiz-logistic-regression" class="section level5">
<h5>Skills Quiz, Logistic Regression</h5>
<p>With some algebra the simple logistic regression moel can be reorganized as pi-i/1-pi=e raised to (B1*xi). The following statements are true for this equation pi-i/1-pi is the odds of success, the odds of success equal eB0 when xi=0, the odds of success increas by the factor of eB1 for every one unit increase in xi. pi-i represents the notation P(Yi=1|Xi) exp(-.232) a one unit increase in outside temp results in a .7929 change in the odds of an o-ring failure B1 = -.232</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">View</span>(infert)</a>
<a class="sourceLine" id="cb27-2" title="2">?infert</a>
<a class="sourceLine" id="cb27-3" title="3">infert.glm&lt;-<span class="st"> </span><span class="kw">glm</span>((spontaneous<span class="op">&gt;</span><span class="dv">0</span>)<span class="op">~</span>age, <span class="dt">data=</span>infert, <span class="dt">family=</span>binomial)</a>
<a class="sourceLine" id="cb27-4" title="4"><span class="kw">summary</span>(infert.glm)</a>
<a class="sourceLine" id="cb27-5" title="5">b&lt;-infert.glm<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb27-6" title="6"><span class="kw">plot</span>((spontaneous<span class="op">&gt;</span><span class="dv">0</span>)<span class="op">~</span>age, <span class="dt">data=</span>infert)</a>
<a class="sourceLine" id="cb27-7" title="7"><span class="kw">curve</span>(<span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)), <span class="dt">add=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb27-8" title="8"><span class="kw">table</span>(infert<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb27-9" title="9"><span class="co"># note to self it is glm$y and glm$fitted literally</span></a>
<a class="sourceLine" id="cb27-10" title="10"><span class="kw">library</span>(ResourceSelection)</a>
<a class="sourceLine" id="cb27-11" title="11"><span class="kw">hoslem.test</span>(infert.glm<span class="op">$</span>y, infert.glm<span class="op">$</span>fitted, <span class="dt">g=</span>?)</a>
<a class="sourceLine" id="cb27-12" title="12"><span class="co">#but for repeated values</span></a>
<a class="sourceLine" id="cb27-13" title="13"><span class="kw">pchisq</span>(<span class="fl">334.01</span>, <span class="dv">246</span>, <span class="dt">lower.tail=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb27-14" title="14"></a>
<a class="sourceLine" id="cb27-15" title="15"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb27-16" title="16"><span class="kw">View</span>(Galton)</a>
<a class="sourceLine" id="cb27-17" title="17">?Galton</a>
<a class="sourceLine" id="cb27-18" title="18">my.glm&lt;-<span class="kw">glm</span>((sex<span class="op">==</span><span class="st">&quot;M&quot;</span>)<span class="op">~</span>height, <span class="dt">data=</span>Galton, <span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb27-19" title="19"><span class="kw">summary</span>(my.glm)</a>
<a class="sourceLine" id="cb27-20" title="20">b&lt;-my.glm<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb27-21" title="21"><span class="kw">plot</span>((sex<span class="op">==</span><span class="st">&quot;M&quot;</span>)<span class="op">~</span>height, <span class="dt">data=</span>Galton)</a>
<a class="sourceLine" id="cb27-22" title="22"><span class="kw">curve</span>(<span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)), <span class="dt">add=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb27-23" title="23"><span class="kw">exp</span>(b[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb27-24" title="24"><span class="kw">predict</span>(my.glm, <span class="dt">newdata=</span><span class="kw">data.frame</span>(<span class="dt">height =</span><span class="dv">65</span>), <span class="dt">type=</span><span class="st">&quot;response&quot;</span>)</a>
<a class="sourceLine" id="cb27-25" title="25"><span class="kw">hoslem.test</span>(my.glm<span class="op">$</span>y, my.glm<span class="op">$</span>fitted, <span class="dt">g=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb27-26" title="26"><span class="co"># Assessment Quiz</span></a>
<a class="sourceLine" id="cb27-27" title="27"></a>
<a class="sourceLine" id="cb27-28" title="28"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb27-29" title="29"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb27-30" title="30">  <span class="kw">View</span>(Gestation)</a>
<a class="sourceLine" id="cb27-31" title="31"></a>
<a class="sourceLine" id="cb27-32" title="32">  ?Gestation</a>
<a class="sourceLine" id="cb27-33" title="33">gest&lt;-Gestation <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">smokeb =</span> <span class="kw">ifelse</span>(smoke<span class="op">==</span><span class="st">&quot;never&quot;</span>, <span class="dv">0</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb27-34" title="34">my.glm&lt;-<span class="kw">glm</span>(smokeb<span class="op">~</span>wt, <span class="dt">data=</span>gest, <span class="dt">family=</span>binomial)</a>
<a class="sourceLine" id="cb27-35" title="35"><span class="kw">summary</span>(my.glm)</a>
<a class="sourceLine" id="cb27-36" title="36"><span class="kw">exp</span>(.<span class="dv">0370</span><span class="op">*</span><span class="dv">25</span>)</a></code></pre></div>
<p><br></p>
</div>
</div>
<div id="practice-final-2-week-11" class="section level4">
<h4>Practice Final 2, Week 11</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="co"># Skills Quiz, Mulitple Logistic Regression</span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb28-3" title="3"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb28-4" title="4"><span class="co">#1 </span></a>
<a class="sourceLine" id="cb28-5" title="5">my.lm&lt;-<span class="kw">lm</span>(length<span class="op">~</span>width, <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb28-6" title="6"><span class="kw">summary</span>(my.lm)</a>
<a class="sourceLine" id="cb28-7" title="7"></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">#2 Residuals v fitted &amp; QQ Plot wonky did AOV then did the assumption tests</span></a>
<a class="sourceLine" id="cb28-9" title="9">Kruskal<span class="op">-</span>Wallis</a>
<a class="sourceLine" id="cb28-10" title="10">RT &lt;-<span class="st"> </span>RailTrail</a>
<a class="sourceLine" id="cb28-11" title="11"></a>
<a class="sourceLine" id="cb28-12" title="12">RT<span class="op">$</span>Season &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">with</span>(RT, spring <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>summer <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>fall))</a>
<a class="sourceLine" id="cb28-13" title="13"></a>
<a class="sourceLine" id="cb28-14" title="14"><span class="co">#3 Go back and check this</span></a>
<a class="sourceLine" id="cb28-15" title="15">my.glm &lt;-<span class="st"> </span><span class="kw">glm</span>(<span class="dt">formula=</span>volume<span class="op">~</span>Season, <span class="dt">data=</span>RT)</a>
<a class="sourceLine" id="cb28-16" title="16"><span class="kw">summary</span>(my.glm)</a>
<a class="sourceLine" id="cb28-17" title="17"></a>
<a class="sourceLine" id="cb28-18" title="18"><span class="co">##redo</span></a>
<a class="sourceLine" id="cb28-19" title="19"><span class="co">#4 </span></a>
<a class="sourceLine" id="cb28-20" title="20"><span class="kw">table</span>(KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb28-21" title="21"></a>
<a class="sourceLine" id="cb28-22" title="22"><span class="co">#5</span></a>
<a class="sourceLine" id="cb28-23" title="23"><span class="kw">mean</span>(length<span class="op">~</span><span class="kw">as.factor</span>(birthyear), <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb28-24" title="24"></a>
<a class="sourceLine" id="cb28-25" title="25"></a>
<a class="sourceLine" id="cb28-26" title="26"><span class="co"># 19 Normality of error terms</span></a>
<a class="sourceLine" id="cb28-27" title="27"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb28-28" title="28"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb28-29" title="29"><span class="kw">plot</span>(my.lm, <span class="dt">which=</span><span class="dv">1</span>, <span class="dt">caption=</span><span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb28-30" title="30"><span class="kw">mtext</span>(<span class="dt">side=</span><span class="dv">3</span>, <span class="dt">text=</span><span class="st">&quot;Residuals vs Fitted&quot;</span>)</a>
<a class="sourceLine" id="cb28-31" title="31"><span class="kw">qqPlot</span>(my.lm<span class="op">$</span>residuals, <span class="dt">id=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-32" title="32"><span class="kw">mtext</span>(<span class="dt">side=</span><span class="dv">3</span>,<span class="dt">text=</span><span class="st">&quot;Residuals QQ Plot&quot;</span>)</a>
<a class="sourceLine" id="cb28-33" title="33"><span class="kw">plot</span>(my.lm<span class="op">$</span>residuals)</a>
<a class="sourceLine" id="cb28-34" title="34"><span class="kw">mtext</span>(<span class="dt">side=</span><span class="dv">3</span>, <span class="dt">text=</span><span class="st">&quot;Residuals vs Order&quot;</span>)</a>
<a class="sourceLine" id="cb28-35" title="35"></a>
<a class="sourceLine" id="cb28-36" title="36"><span class="co"># 21 </span></a>
<a class="sourceLine" id="cb28-37" title="37">Wilcoxon Rank Sum Test  Order <span class="op">&amp;</span><span class="st"> </span>Independent</a>
<a class="sourceLine" id="cb28-38" title="38"></a>
<a class="sourceLine" id="cb28-39" title="39"><span class="co"># Assessment Quiz</span></a></code></pre></div>
</div>
<div id="chi-squared-test-week-12" class="section level4">
<h4>Chi-Squared Test, Week 12</h4>
<div id="barplot-rbind-cbind" class="section level5">
<h5>Barplot, rbind, cbind</h5>
<p>rowbind &amp; colbind change the the orientation of binded vectors<br></p>
<p>Data.frame has the info A table is summarized counts (not individual values it’s summarized counts)<br></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">View</span>(Titanic)</a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co"># It&#39;s a table because the frequency col tells how many of each type (summarized count)</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co"># Can use class function</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="kw">class</span>(Titanic)</a>
<a class="sourceLine" id="cb29-5" title="5"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb29-6" title="6"><span class="kw">View</span>(TitanicSurvival)</a>
<a class="sourceLine" id="cb29-7" title="7"><span class="kw">class</span>(TitanicSurvival)</a>
<a class="sourceLine" id="cb29-8" title="8"></a>
<a class="sourceLine" id="cb29-9" title="9"></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb29-11" title="11"><span class="kw">View</span>(KidsFeet)</a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co"># create a table</span></a>
<a class="sourceLine" id="cb29-13" title="13"><span class="co"># first see what the col names on</span></a>
<a class="sourceLine" id="cb29-14" title="14"><span class="kw">names</span>(KidsFeet)</a>
<a class="sourceLine" id="cb29-15" title="15"><span class="co"># first not useful, generally want two catagorical variables like second</span></a>
<a class="sourceLine" id="cb29-16" title="16"><span class="kw">table</span>(KidsFeet<span class="op">$</span>birthmonth, KidsFeet<span class="op">$</span>width)</a>
<a class="sourceLine" id="cb29-17" title="17"><span class="kw">table</span>(KidsFeet<span class="op">$</span>birthmonth, KidsFeet<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb29-18" title="18"></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="co"># barplot() and chisq.test() want a table not data.frame</span></a>
<a class="sourceLine" id="cb29-20" title="20"><span class="kw">View</span>(HairEyeColor)</a>
<a class="sourceLine" id="cb29-21" title="21">HEC1 &lt;-<span class="st"> </span>HairEyeColor[,,<span class="st">&quot;Male&quot;</span>] <span class="op">+</span><span class="st"> </span>HairEyeColor[,,<span class="st">&quot;Female&quot;</span>]</a>
<a class="sourceLine" id="cb29-22" title="22"><span class="kw">View</span>(HEC1)</a>
<a class="sourceLine" id="cb29-23" title="23">HEC1</a>
<a class="sourceLine" id="cb29-24" title="24"></a>
<a class="sourceLine" id="cb29-25" title="25"><span class="co"># The columns of the table become the x-axis in the barplot!!!</span></a>
<a class="sourceLine" id="cb29-26" title="26"><span class="kw">barplot</span>(HEC1)</a>
<a class="sourceLine" id="cb29-27" title="27"><span class="co"># clustered barplots are easier to read</span></a>
<a class="sourceLine" id="cb29-28" title="28"><span class="kw">barplot</span>(HEC1, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend.text=</span> <span class="ot">TRUE</span>, <span class="dt">xlab=</span><span class="st">&quot;Eye Color&quot;</span>)</a>
<a class="sourceLine" id="cb29-29" title="29"></a>
<a class="sourceLine" id="cb29-30" title="30"><span class="co"># want to switch--transpose the table</span></a>
<a class="sourceLine" id="cb29-31" title="31"><span class="kw">t</span>(HEC1)</a>
<a class="sourceLine" id="cb29-32" title="32"><span class="co"># now eye color on the rows, hair color on the column</span></a>
<a class="sourceLine" id="cb29-33" title="33"><span class="kw">barplot</span>(<span class="kw">t</span>(HEC1), <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend.text=</span> <span class="ot">TRUE</span>, <span class="dt">xlab=</span><span class="st">&quot;Hair Color&quot;</span>)</a></code></pre></div>
<p>Can use c or rbind to create a table or if using data set that’s a frame, use table<br></p>
</div>
<div id="chi-squared-test" class="section level5">
<h5>Chi Squared Test</h5>
<p>Ho= Row Variable and Column variable are independent (Independent of time of day the proportion of people that are single is the same, independent of relationship status the percent of people at diff times or day is the same–independent of what group I’m looking at they’re the same) It’s still a statement of equality. <br></p>
<p>Ha: Row Variable and Column variable are associated<br></p>
<p>Expected Count = Row total # col total / total<br></p>
<p>Chi-squared distribution is a right-skewed distribution. Can’t be negative. As Df increases it becomes more normal</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">mytable &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="dt">Single=</span><span class="kw">c</span>(<span class="dt">Morning=</span><span class="dv">25</span>, <span class="dt">Afternoon=</span><span class="dv">20</span>, <span class="dt">Evening=</span><span class="dv">105</span>), <span class="dt">Dating=</span><span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">15</span>,<span class="dv">40</span>), <span class="dt">Married=</span><span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">15</span>,<span class="dv">50</span>))</a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">barplot</span>(mytable, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend.text=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>Fail to reject the null hypothesis. I don’t have enough evidence to support relationship status and time at the gym are related.</p>
<p>Requirements:<br> All expected counts need to be &gt; 5, or if all counts are greater than 1 AND the mean is greater than 5. (5 isn’t a magic number. It just seems to work.)<br></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1">testobject&lt;-<span class="kw">chisq.test</span>(mytable)</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="kw">names</span>(testobject)</a>
<a class="sourceLine" id="cb31-3" title="3">testobject<span class="op">$</span>observed</a>
<a class="sourceLine" id="cb31-4" title="4"></a>
<a class="sourceLine" id="cb31-5" title="5">Digging Deeper with residuals</a>
<a class="sourceLine" id="cb31-6" title="6"></a>
<a class="sourceLine" id="cb31-7" title="7"><span class="co"># Distance between observed value and the expected value (observed count minus expected count divided by the square root of the expected ) We&#39;re doing it to each cell individually</span></a>
<a class="sourceLine" id="cb31-8" title="8">testobject<span class="op">$</span>residuals</a>
<a class="sourceLine" id="cb31-9" title="9"><span class="co"># I observed fewer people in the morning than would have expected</span></a></code></pre></div>
<p>Allows you to say, "Here’s where the relationship lies… there are less people at x time than we would have expected</p>
</div>
<div id="skills-quiz-chi-squared-tests" class="section level5">
<h5>Skills Quiz, Chi Squared Tests</h5>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">glasses &lt;-<span class="st"> </span><span class="kw">cbind</span>( <span class="dt">Males =</span> <span class="kw">c</span>(<span class="dt">Glasses =</span> <span class="dv">5</span>, <span class="dt">Contacts =</span> <span class="dv">12</span>, <span class="dt">None =</span> <span class="dv">18</span>), <span class="dt">Females =</span> <span class="kw">c</span>(<span class="dt">Glasses =</span> <span class="dv">4</span>, <span class="dt">Contacts =</span> <span class="dv">14</span>, <span class="dt">None =</span> <span class="dv">22</span>))</a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3">glasses</a>
<a class="sourceLine" id="cb32-4" title="4"></a>
<a class="sourceLine" id="cb32-5" title="5"><span class="kw">barplot</span>(glasses, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend.text=</span><span class="ot">TRUE</span>, <span class="dt">args.legend=</span><span class="kw">list</span>(<span class="dt">x =</span> <span class="st">&quot;topleft&quot;</span>, <span class="dt">bty=</span><span class="st">&quot;n&quot;</span>))</a>
<a class="sourceLine" id="cb32-6" title="6"></a>
<a class="sourceLine" id="cb32-7" title="7">chis.glasses &lt;-<span class="st"> </span><span class="kw">chisq.test</span>(glasses)</a>
<a class="sourceLine" id="cb32-8" title="8"></a>
<a class="sourceLine" id="cb32-9" title="9">chis.glasses<span class="op">$</span>expected </a>
<a class="sourceLine" id="cb32-10" title="10"></a>
<a class="sourceLine" id="cb32-11" title="11">chis.glasses</a>
<a class="sourceLine" id="cb32-12" title="12"></a>
<a class="sourceLine" id="cb32-13" title="13">chis.glasses<span class="op">$</span>residuals</a>
<a class="sourceLine" id="cb32-14" title="14"></a>
<a class="sourceLine" id="cb32-15" title="15"></a>
<a class="sourceLine" id="cb32-16" title="16">education &lt;-<span class="st"> </span><span class="kw">cbind</span>( <span class="st">`</span><span class="dt">United States</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dt">Engineering =</span> <span class="dv">61941</span>, <span class="st">`</span><span class="dt">Natural Science</span><span class="st">`</span> =<span class="st"> </span><span class="dv">111158</span>, <span class="st">`</span><span class="dt">Social Science</span><span class="st">`</span> =<span class="st"> </span><span class="dv">182166</span>), <span class="st">`</span><span class="dt">Western Europe</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dt">Engineering =</span> <span class="dv">158931</span>, <span class="st">`</span><span class="dt">Natural Science</span><span class="st">`</span> =<span class="st"> </span><span class="dv">140126</span>, <span class="st">`</span><span class="dt">Social Science</span><span class="st">`</span> =<span class="st"> </span><span class="dv">116353</span>), <span class="dt">Asia =</span> <span class="kw">c</span>(<span class="dv">280772</span>, <span class="dv">242879</span>, <span class="dv">236018</span>))</a>
<a class="sourceLine" id="cb32-17" title="17"></a>
<a class="sourceLine" id="cb32-18" title="18">education</a>
<a class="sourceLine" id="cb32-19" title="19"></a>
<a class="sourceLine" id="cb32-20" title="20">chis.edu&lt;-<span class="kw">chisq.test</span>(education)</a>
<a class="sourceLine" id="cb32-21" title="21"></a>
<a class="sourceLine" id="cb32-22" title="22"><span class="kw">barplot</span>(education, <span class="dt">main=</span><span class="st">&quot;College Degrees Awarded by Region&quot;</span>, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend.text=</span><span class="ot">TRUE</span>, <span class="dt">args.legend=</span><span class="kw">list</span>(<span class="dt">x =</span> <span class="st">&quot;topleft&quot;</span>, <span class="dt">bty=</span><span class="st">&quot;n&quot;</span>))</a>
<a class="sourceLine" id="cb32-23" title="23"></a>
<a class="sourceLine" id="cb32-24" title="24">chis.edu<span class="op">$</span>residuals</a>
<a class="sourceLine" id="cb32-25" title="25"></a>
<a class="sourceLine" id="cb32-26" title="26">?InsectSprays</a>
<a class="sourceLine" id="cb32-27" title="27"><span class="kw">View</span>(InsectSprays)</a>
<a class="sourceLine" id="cb32-28" title="28">my_aov &lt;-<span class="st"> </span><span class="kw">aov</span>(count<span class="op">~</span>spray, <span class="dt">data =</span> InsectSprays)</a>
<a class="sourceLine" id="cb32-29" title="29"><span class="kw">summary</span>(my_aov)</a>
<a class="sourceLine" id="cb32-30" title="30"></a>
<a class="sourceLine" id="cb32-31" title="31"><span class="kw">qqPlot</span>(my_aov<span class="op">$</span>residuals) <span class="co"># must have residuals plot</span></a>
<a class="sourceLine" id="cb32-32" title="32"><span class="co"># ANOVA is robust to violation of assumptions, the degree to which you violate the assumptions is the degree to which you should trust your p-value</span></a>
<a class="sourceLine" id="cb32-33" title="33"><span class="co"># Book walks through</span></a>
<a class="sourceLine" id="cb32-34" title="34"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) <span class="co"># Turns on a partition so you can see both at the same time</span></a>
<a class="sourceLine" id="cb32-35" title="35"><span class="kw">plot</span>(my_aov, <span class="dt">which =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb32-36" title="36">car<span class="op">::</span><span class="kw">qqPlot</span>(my_aov<span class="op">$</span>residuals)</a></code></pre></div>
</div>
<div id="assessment-quiz-6" class="section level5">
<h5>Assessment Quiz</h5>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">What type of statistical test would be appropriate <span class="cf">for</span> understanding how gender impacts the risk a person of a certain age has of having a heart attack? MULTIPLE logistic <span class="kw">regression</span> (heart attack <span class="dt">risk=</span>y, <span class="dt">age=</span>quantatative, <span class="dt">gender=</span>qualitative) We are trying to predict an outcome, whether or not the person will experience a heart attack, using their age and gender. Age is a quantitative measurement, gender is a qualitative measurement, and the response variable Y could be <span class="dv">1</span> <span class="cf">for</span> a heart attack and <span class="dv">0</span> <span class="cf">for</span> no heart attack. This is the perfect scenario of a multiple logistic <span class="kw">regression.</span> ()</a>
<a class="sourceLine" id="cb33-2" title="2"></a>
<a class="sourceLine" id="cb33-3" title="3">Which statistical method would be best suited <span class="cf">for</span> determining how the age and gender of an individual can predict their annual income, measured <span class="cf">in</span> thousands of dollars? The response variable of this scenario, annual income measured <span class="cf">in</span> thousands, is quantitative. Since we have a quantitative explanatory variable of age and a qualitative explanatory variable of gender, a multiple linear regression would be the best choice. We can make a prediction using the <span class="kw">predict</span>()</a>
<a class="sourceLine" id="cb33-4" title="4"></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>))</a>
<a class="sourceLine" id="cb33-6" title="6"><span class="kw">plot</span>((Wind <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">~</span><span class="st"> </span>Temp, <span class="dt">data=</span>airquality, <span class="dt">xlab=</span><span class="st">&quot;Daily Average Temperature&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Probability Daily Average Wind Speed (mph) &gt; 10&quot;</span>, <span class="dt">main=</span><span class="st">&quot;La Guardia Airport Measurements in 1973&quot;</span>, <span class="dt">col=</span><span class="kw">as.factor</span>(Month))</a>
<a class="sourceLine" id="cb33-7" title="7">b &lt;-<span class="st"> </span>air.glm<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb33-8" title="8"><span class="kw">curve</span>(<span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(b[<span class="dv">1</span>]<span class="op">+</span>b[<span class="dv">2</span>]<span class="op">*</span>x)), <span class="dt">add=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb33-9" title="9"></a>
<a class="sourceLine" id="cb33-10" title="10">air.glm &lt;-<span class="st"> </span><span class="kw">glm</span>(Wind <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span>Temp <span class="op">+</span><span class="st"> </span><span class="kw">as.factor</span>(Month), <span class="dt">data=</span>airquality, <span class="dt">family=</span>binomial)</a>
<a class="sourceLine" id="cb33-11" title="11">air.glm</a>
<a class="sourceLine" id="cb33-12" title="12"></a>
<a class="sourceLine" id="cb33-13" title="13">During which month is there a significant change <span class="cf">in</span> the probability that the daily average wind speed will be greater than <span class="dv">10</span> mph, <span class="cf">for</span> all values of daily average temperature? No change. You can see it on the graph, it is pretty consistant, but look at the summary values <span class="cf">if</span> NONE ARE SIGNIFICANT then there is no change. Here the pvalues <span class="cf">for</span> months were <span class="fl">.18</span>, .<span class="fl">31.</span>, <span class="fl">.16</span>, <span class="fl">.053</span></a></code></pre></div>
</div>
</div>
<div id="randomization-testing-week-13" class="section level4">
<h4>Randomization Testing, Week 13</h4>
<p>A <span class="math inline">\(p\)</span>-value is the probability we get a test statistics at least as extreme as the one we got, assuming the null hypothesis is true. In other words what’s the probability we could get that result by chance alone.</p>
<p>6 out of 15 girls. We can take lots of random mixtures, is it likely or possible that you could get all in one group.</p>
<p>Parametric distribution has parameters, you just change some of the paramaters. An F or t distribution always has the same function. Non-parametric tests use distributions that can’t be defined simply by a function.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb34-3" title="3"></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">2</span>), <span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">2</span>), <span class="dt">names =</span> <span class="kw">c</span>(<span class="st">&quot;sample1&quot;</span>, <span class="st">&quot;sample2&quot;</span>))</a>
<a class="sourceLine" id="cb34-5" title="5"></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="co">## comparison of 2 genders kid length of feet</span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="kw">boxplot</span>(length <span class="op">~</span><span class="st"> </span>sex, <span class="dt">data =</span> KidsFeet)</a>
<a class="sourceLine" id="cb34-8" title="8"></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="co">### Perform a t-test (parametric test) to compare the genders foot length</span></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="co"># Step 1: get the original observed test statistic</span></a>
<a class="sourceLine" id="cb34-11" title="11">ttestout &lt;-<span class="st"> </span><span class="kw">t.test</span>(length <span class="op">~</span><span class="st"> </span>sex, <span class="dt">data =</span> KidsFeet)</a>
<a class="sourceLine" id="cb34-12" title="12"></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="co">#### Randomization Testing</span></a>
<a class="sourceLine" id="cb34-14" title="14"><span class="co"># We need a test statistic and a distribution of the test statistic</span></a>
<a class="sourceLine" id="cb34-15" title="15"><span class="co">#Step2: Doing the randomization</span></a>
<a class="sourceLine" id="cb34-16" title="16"><span class="co"># Test stat</span></a>
<a class="sourceLine" id="cb34-17" title="17"></a>
<a class="sourceLine" id="cb34-18" title="18">observed_test_stat &lt;-<span class="st"> </span>ttestout<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb34-19" title="19"></a>
<a class="sourceLine" id="cb34-20" title="20"><span class="co"># Distribution (for loops)</span></a>
<a class="sourceLine" id="cb34-21" title="21"><span class="co"># Under the null hypothesis of random chance alone</span></a>
<a class="sourceLine" id="cb34-22" title="22"></a>
<a class="sourceLine" id="cb34-23" title="23">N &lt;-<span class="st"> </span><span class="dv">2000</span> <span class="co"># represents how many random samples iterated</span></a>
<a class="sourceLine" id="cb34-24" title="24"></a>
<a class="sourceLine" id="cb34-25" title="25"><span class="co"># Randomized test called permutation testing</span></a>
<a class="sourceLine" id="cb34-26" title="26">permTestStats &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, N)</a>
<a class="sourceLine" id="cb34-27" title="27"></a>
<a class="sourceLine" id="cb34-28" title="28"><span class="co"># if I feed a vector into sample it&#39;ll give adifferent random order sample(data$col)</span></a>
<a class="sourceLine" id="cb34-29" title="29"><span class="co"># for loop</span></a>
<a class="sourceLine" id="cb34-30" title="30"><span class="co"># start count : end count (default count by 1 ? can you change it)</span></a>
<a class="sourceLine" id="cb34-31" title="31"><span class="co"># alternatively could have reorganized the length (x or y)</span></a>
<a class="sourceLine" id="cb34-32" title="32"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N) {</a>
<a class="sourceLine" id="cb34-33" title="33">  permutedTest &lt;-<span class="st"> </span><span class="kw">t.test</span>(length <span class="op">~</span><span class="st"> </span><span class="kw">sample</span>(sex), <span class="dt">data=</span>KidsFeet)</a>
<a class="sourceLine" id="cb34-34" title="34"></a>
<a class="sourceLine" id="cb34-35" title="35">  permTestStats[i] &lt;-<span class="st"> </span>permutedTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb34-36" title="36">  }<span class="co">#stores it in index i</span></a>
<a class="sourceLine" id="cb34-37" title="37"></a>
<a class="sourceLine" id="cb34-38" title="38"><span class="co"># Step 3: get the p-value</span></a>
<a class="sourceLine" id="cb34-39" title="39"><span class="co"># coerce to vector from list</span></a>
<a class="sourceLine" id="cb34-40" title="40"></a>
<a class="sourceLine" id="cb34-41" title="41"><span class="kw">hist</span>(<span class="kw">as.numeric</span>(permTestStats))</a>
<a class="sourceLine" id="cb34-42" title="42"><span class="kw">abline</span>(<span class="dt">v =</span> observed_test_stat)</a>
<a class="sourceLine" id="cb34-43" title="43"></a>
<a class="sourceLine" id="cb34-44" title="44"><span class="co"># comput the p-value</span></a>
<a class="sourceLine" id="cb34-45" title="45">permTestStats <span class="op">&gt;</span><span class="st"> </span>observed_test_stat</a>
<a class="sourceLine" id="cb34-46" title="46"><span class="co"># gives vector of true and false - can be recoded as 0 1</span></a>
<a class="sourceLine" id="cb34-47" title="47"><span class="co"># one sided</span></a>
<a class="sourceLine" id="cb34-48" title="48"><span class="kw">sum</span>(permTestStats <span class="op">&gt;</span><span class="st"> </span>observed_test_stat) <span class="op">/</span><span class="st"> </span>N</a>
<a class="sourceLine" id="cb34-49" title="49"></a>
<a class="sourceLine" id="cb34-50" title="50"><span class="co"># p-value of two-taled- multiply by 2</span></a>
<a class="sourceLine" id="cb34-51" title="51">(<span class="kw">sum</span>(permTestStats <span class="op">&gt;</span><span class="st"> </span>observed_test_stat) <span class="op">/</span><span class="st"> </span>N) <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb34-52" title="52"></a>
<a class="sourceLine" id="cb34-53" title="53"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>,N))</a></code></pre></div>
</div>
<div id="part-2" class="section level4">
<h4>Part 2</h4>
<p>Question 1 Perform an independent two-sample t test using a permutation test. Use the mtcars dataset and test whether the average weight of the four cylinder cars differs from the average weight of eight cylinder cars. Use the following psuedo code as a starting spot.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">?mtcars</a>
<a class="sourceLine" id="cb35-2" title="2">mtcars<span class="op">$</span>cyl</a>
<a class="sourceLine" id="cb35-3" title="3"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb35-4" title="4"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb35-5" title="5"></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="co"># filter the data for what we want, 4 &amp; 8 cylinders</span></a>
<a class="sourceLine" id="cb35-7" title="7">mtcars48 &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-8" title="8"><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">!=</span><span class="st"> </span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb35-9" title="9"></a>
<a class="sourceLine" id="cb35-10" title="10"><span class="co"># Step 1 find the test original statistic (t.test &amp; stat) = -6.4444974</span></a>
<a class="sourceLine" id="cb35-11" title="11">observedTestStat &lt;-<span class="st"> </span><span class="kw">t.test</span>(wt <span class="op">~</span><span class="st"> </span>cyl, <span class="dt">data=</span>mtcars48)<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb35-12" title="12"></a>
<a class="sourceLine" id="cb35-13" title="13"><span class="co"># Step 2, perform the permutations</span></a>
<a class="sourceLine" id="cb35-14" title="14">  <span class="co"># set n</span></a>
<a class="sourceLine" id="cb35-15" title="15">N &lt;-<span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb35-16" title="16">   <span class="co">#create empty vector to fill with 2000 test statistics</span></a>
<a class="sourceLine" id="cb35-17" title="17">permutedTestStats &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, N)</a>
<a class="sourceLine" id="cb35-18" title="18"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N){</a>
<a class="sourceLine" id="cb35-19" title="19">  <span class="co"># randomize eithre the group assignments or the weights</span></a>
<a class="sourceLine" id="cb35-20" title="20">  <span class="co"># They do 3 steps -&gt; randomly permute the data, perform the test with the data, get the test statistic</span></a>
<a class="sourceLine" id="cb35-21" title="21">  permutedTestStats[i] &lt;-<span class="st"> </span><span class="kw">t.test</span>(wt <span class="op">~</span><span class="st"> </span><span class="kw">sample</span>(cyl), <span class="dt">data=</span>mtcars48)<span class="op">$</span>statistic <span class="co"># samply will randomize</span></a>
<a class="sourceLine" id="cb35-22" title="22">  </a>
<a class="sourceLine" id="cb35-23" title="23">}</a>
<a class="sourceLine" id="cb35-24" title="24"></a>
<a class="sourceLine" id="cb35-25" title="25"><span class="co"># look at the vector of test stats</span></a>
<a class="sourceLine" id="cb35-26" title="26"><span class="kw">hist</span>(permutedTestStats)</a>
<a class="sourceLine" id="cb35-27" title="27"><span class="kw">abline</span>(<span class="dt">v =</span> observedTestStat)</a>
<a class="sourceLine" id="cb35-28" title="28"></a>
<a class="sourceLine" id="cb35-29" title="29"><span class="co"># differs = two tailed</span></a>
<a class="sourceLine" id="cb35-30" title="30"><span class="co"># it&#39;s off the grid, but we can see which ones are</span></a>
<a class="sourceLine" id="cb35-31" title="31"><span class="co"># we can add the values that are less than or equal to what we orginally observed then we divide by the number of tests after that then we multiply by two for the two tails</span></a>
<a class="sourceLine" id="cb35-32" title="32"></a>
<a class="sourceLine" id="cb35-33" title="33"><span class="kw">sum</span>(permutedTestStats <span class="op">&lt;=</span><span class="st"> </span>observedTestStat) <span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">2</span> </a></code></pre></div>
<p>Question 3 Perform a One-way ANOVA using a permutation test. Use the diamonds dataset and test whether the average price of the diamonds depends on the clarity. Use the following psuedo code as a starting spot. (Hint: because the diamonds dataset has 53,000 rows we start with a small N value)</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co"># Step 1 get observed test statistic</span></a>
<a class="sourceLine" id="cb36-2" title="2"><span class="kw">aov</span>(price <span class="op">~</span><span class="st"> </span>clarity,  <span class="dt">data=</span>diamonds)</a>
<a class="sourceLine" id="cb36-3" title="3"><span class="co"># We need to get the f statistic since it isn&#39;t in the test, 2.2e-16</span></a>
<a class="sourceLine" id="cb36-4" title="4">myTest &lt;-<span class="st"> </span><span class="kw">anova</span>(<span class="kw">aov</span>(price <span class="op">~</span><span class="st"> </span>clarity,  <span class="dt">data=</span>diamonds))</a>
<a class="sourceLine" id="cb36-5" title="5"><span class="kw">names</span>(myTest)</a>
<a class="sourceLine" id="cb36-6" title="6">myTest<span class="st">`</span><span class="dt">F value</span><span class="st">`</span>[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co"># double square brackets in r means give me a number, you can do ths as an alternative to the one above</span></a>
<a class="sourceLine" id="cb36-8" title="8">observedTestStat &lt;-<span class="st"> </span>myTest[[<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">1</span>)]]</a>
<a class="sourceLine" id="cb36-9" title="9"><span class="co"># or can do it this way</span></a>
<a class="sourceLine" id="cb36-10" title="10">observedTestStat &lt;-<span class="st"> </span><span class="kw">summary</span>(myTest)[[<span class="dv">1</span>]]<span class="op">$</span><span class="st">`</span><span class="dt">F value</span><span class="st">`</span>[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb36-11" title="11"></a>
<a class="sourceLine" id="cb36-12" title="12"><span class="co"># Step 2, perform permutiation tests</span></a>
<a class="sourceLine" id="cb36-13" title="13"><span class="co"># He&#39;s using anova in the place of summary</span></a>
<a class="sourceLine" id="cb36-14" title="14">N&lt;-<span class="dv">100</span></a>
<a class="sourceLine" id="cb36-15" title="15">permutedTestStats &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, N) <span class="co">#rep stands for repeat</span></a>
<a class="sourceLine" id="cb36-16" title="16"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N){</a>
<a class="sourceLine" id="cb36-17" title="17">  <span class="co"># anova doesn&#39;t have a slick way to pull out the f statistic, so use summary</span></a>
<a class="sourceLine" id="cb36-18" title="18">  permutedTest &lt;-<span class="st"> </span><span class="kw">anova</span>(<span class="kw">aov</span>(<span class="kw">sample</span>(price)<span class="op">~</span><span class="st"> </span>clarity, <span class="dt">data=</span>diamonds))</a>
<a class="sourceLine" id="cb36-19" title="19">  <span class="co"># pull out the test statistic</span></a>
<a class="sourceLine" id="cb36-20" title="20">  permutedTestStats[i] &lt;-<span class="st"> </span>permutedTest[[<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>)]]</a>
<a class="sourceLine" id="cb36-21" title="21">}</a>
<a class="sourceLine" id="cb36-22" title="22"></a>
<a class="sourceLine" id="cb36-23" title="23"><span class="co"># hists aren&#39;t working for some reason</span></a>
<a class="sourceLine" id="cb36-24" title="24"><span class="co">#STep 3, get the p-vaule from the generated distribution (visually first)</span></a>
<a class="sourceLine" id="cb36-25" title="25"><span class="kw">hist</span>(permutedTestStats)</a>
<a class="sourceLine" id="cb36-26" title="26"><span class="kw">ablive</span>(<span class="dt">v=</span>observedTestStat)</a>
<a class="sourceLine" id="cb36-27" title="27"></a>
<a class="sourceLine" id="cb36-28" title="28"><span class="kw">sum</span>(permutedTestStats <span class="op">&gt;=</span><span class="st"> </span>observedTestStat) <span class="op">/</span><span class="st"> </span>N</a></code></pre></div>
<p>Question 5 Perform a Logistic Regression Test using a permutation test. Use the SAT dataset (mosaic library) and test whether the likelihood of scoring above 1000 (sat &gt; 1000) on the SAT depends on the expenditure per pupil (expend). Use the following psuedo code as a starting spot.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">filter the data</a>
<a class="sourceLine" id="cb37-2" title="2">SAT2 &lt;-<span class="st"> </span>SAT <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">highscore =</span> <span class="kw">ifelse</span>(sat<span class="op">&gt;</span><span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb37-4" title="4"></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="co"># Step 1 run the glm to get the statistic, -2.499955</span></a>
<a class="sourceLine" id="cb37-6" title="6">mymod &lt;-<span class="st"> </span><span class="kw">glm</span>(highscore <span class="op">~</span><span class="st"> </span>expend, <span class="dt">data =</span> SAT2, <span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb37-7" title="7"><span class="kw">summary</span>(mymod)</a>
<a class="sourceLine" id="cb37-8" title="8"><span class="kw">names</span>(<span class="kw">summary</span>(mymod))</a>
<a class="sourceLine" id="cb37-9" title="9">observedTestStat &lt;-<span class="st"> </span><span class="kw">summary</span>(mymod)<span class="op">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb37-10" title="10"></a>
<a class="sourceLine" id="cb37-11" title="11"><span class="co">#Step 2, do the permutation test statistic</span></a>
<a class="sourceLine" id="cb37-12" title="12">N &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb37-13" title="13">permutedTestStats &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, N)</a>
<a class="sourceLine" id="cb37-14" title="14"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N){</a>
<a class="sourceLine" id="cb37-15" title="15">  </a>
<a class="sourceLine" id="cb37-16" title="16">  permutedTest &lt;-<span class="st"> </span><span class="kw">glm</span>(<span class="kw">sample</span>(highscore) <span class="op">~</span><span class="st"> </span>expend, <span class="dt">data =</span> SAT2, <span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb37-17" title="17">  permutedTestStats[i] &lt;-<span class="st"> </span><span class="kw">summary</span>(permutedTest)<span class="op">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb37-18" title="18">}</a>
<a class="sourceLine" id="cb37-19" title="19"></a>
<a class="sourceLine" id="cb37-20" title="20"><span class="co"># Step 3, get p-value from generated distribution</span></a>
<a class="sourceLine" id="cb37-21" title="21"><span class="kw">hist</span>(permutedTestStats)</a>
<a class="sourceLine" id="cb37-22" title="22"><span class="kw">abline</span>(<span class="dt">v=</span>observedTestStat, <span class="dt">col =</span><span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb37-23" title="23"></a>
<a class="sourceLine" id="cb37-24" title="24"><span class="co"># actually calculate the p-value</span></a>
<a class="sourceLine" id="cb37-25" title="25"><span class="kw">sum</span>(permutedTestStats <span class="op">&lt;=</span><span class="st"> </span>observedTestStat) <span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb37-26" title="26"></a>
<a class="sourceLine" id="cb37-27" title="27"><span class="co"># sufficient evidence to suggest tehir is evidence</span></a>
<a class="sourceLine" id="cb37-28" title="28"><span class="co"># If we fail to the slop of B1 is not 0 what are we doing with the null and based on that we make a conclusion about the alternative</span></a>
<a class="sourceLine" id="cb37-29" title="29"></a>
<a class="sourceLine" id="cb37-30" title="30">All of the tests you<span class="st">&#39;ve done can be done as a non-parametrict test</span></a></code></pre></div>
<div id="skills-quiz-permutation-tests" class="section level5">
<h5>Skills Quiz, Permutation Tests</h5>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="co"># Create the data:</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="kw">set.seed</span>(<span class="dv">1140411</span>)</a>
<a class="sourceLine" id="cb38-3" title="3">sample1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dv">69</span>, <span class="fl">2.5</span>)</a>
<a class="sourceLine" id="cb38-4" title="4">sample2 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dv">69</span>, <span class="fl">2.5</span>)</a>
<a class="sourceLine" id="cb38-5" title="5">theData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">values =</span> <span class="kw">c</span>(sample1,sample2), <span class="dt">group =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">each=</span><span class="dv">30</span>))</a>
<a class="sourceLine" id="cb38-6" title="6"><span class="kw">View</span>(theData)</a>
<a class="sourceLine" id="cb38-7" title="7"><span class="kw">boxplot</span>(values <span class="op">~</span><span class="st"> </span>group, <span class="dt">data =</span> theData)</a>
<a class="sourceLine" id="cb38-8" title="8"></a>
<a class="sourceLine" id="cb38-9" title="9">myTest &lt;-<span class="st"> </span><span class="kw">t.test</span>(values<span class="op">~</span>group, <span class="dt">data=</span>theData, <span class="dt">mu=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb38-10" title="10">observedTestStat &lt;-<span class="st"> </span>myTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb38-11" title="11"></a>
<a class="sourceLine" id="cb38-12" title="12">N &lt;-<span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb38-13" title="13">permutedTestStats &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>,N)</a>
<a class="sourceLine" id="cb38-14" title="14"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N){</a>
<a class="sourceLine" id="cb38-15" title="15">  permutedData &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x=</span>theData<span class="op">$</span>group)</a>
<a class="sourceLine" id="cb38-16" title="16">  permutedTest &lt;-<span class="st"> </span><span class="kw">t.test</span>(values<span class="op">~</span>permutedData, <span class="dt">data=</span>theData, <span class="dt">mu=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb38-17" title="17">  permutedTestStats[i] &lt;-<span class="st"> </span>permutedTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb38-18" title="18">}</a>
<a class="sourceLine" id="cb38-19" title="19"><span class="kw">hist</span>(permutedTestStats)</a>
<a class="sourceLine" id="cb38-20" title="20"><span class="kw">abline</span>(<span class="dt">v=</span>observedTestStat)</a>
<a class="sourceLine" id="cb38-21" title="21"><span class="kw">sum</span>(permutedTestStats <span class="op">&gt;=</span><span class="st"> </span>observedTestStat)<span class="op">/</span>N</a>
<a class="sourceLine" id="cb38-22" title="22"><span class="kw">sum</span>(permutedTestStats <span class="op">&lt;=</span><span class="st"> </span>observedTestStat)<span class="op">/</span>N</a>
<a class="sourceLine" id="cb38-23" title="23"><span class="co"># It asked for greater than, less than, &amp; two sided p-values. I multiplied the smaller one by 2 (.46)</span></a>
<a class="sourceLine" id="cb38-24" title="24"></a>
<a class="sourceLine" id="cb38-25" title="25"></a>
<a class="sourceLine" id="cb38-26" title="26"><span class="co">#Question 4</span></a>
<a class="sourceLine" id="cb38-27" title="27"><span class="kw">set.seed</span>(<span class="dv">121</span>)</a>
<a class="sourceLine" id="cb38-28" title="28">sample1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dv">185</span>, <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb38-29" title="29">sample2 &lt;-<span class="st"> </span>sample1 <span class="op">-</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="fl">3.5</span>)</a>
<a class="sourceLine" id="cb38-30" title="30">theData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">values =</span> <span class="kw">c</span>(sample1,sample2), <span class="dt">group =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">each=</span><span class="dv">30</span>), <span class="dt">id =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>),<span class="dt">times=</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb38-31" title="31"><span class="kw">View</span>(theData)</a>
<a class="sourceLine" id="cb38-32" title="32"><span class="kw">with</span>(theData, <span class="kw">hist</span>(values[group<span class="op">==</span><span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>values[group<span class="op">==</span><span class="dv">2</span>]))</a>
<a class="sourceLine" id="cb38-33" title="33"></a>
<a class="sourceLine" id="cb38-34" title="34">myTest &lt;-<span class="st"> </span><span class="kw">t.test</span>(values<span class="op">~</span>group, <span class="dt">data=</span>theData, <span class="dt">paired=</span><span class="ot">TRUE</span>, <span class="dt">mu=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb38-35" title="35">observedTestStat &lt;-<span class="st"> </span>myTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb38-36" title="36"></a>
<a class="sourceLine" id="cb38-37" title="37">N &lt;-<span class="st"> </span><span class="dv">2000</span>      </a>
<a class="sourceLine" id="cb38-38" title="38">permutedTestStats &lt;-<span class="st">  </span><span class="kw">rep</span>(<span class="ot">NA</span>, N)</a>
<a class="sourceLine" id="cb38-39" title="39"><span class="cf">for</span>  (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>N ) {</a>
<a class="sourceLine" id="cb38-40" title="40">   permutedData &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="dt">size=</span><span class="dv">30</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb38-41" title="41">   permutedTest &lt;-<span class="st">  </span><span class="kw">with</span>(theData, <span class="kw">t.test</span>(permutedData<span class="op">*</span>(values[group<span class="op">==</span><span class="dv">1</span>]<span class="op">-</span>values[group<span class="op">==</span><span class="dv">2</span>]),<span class="dt">mu=</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb38-42" title="42">   permutedTestStats[i]  &lt;-<span class="st">  </span>permutedTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb38-43" title="43">}</a>
<a class="sourceLine" id="cb38-44" title="44"><span class="kw">hist</span>(permutedTestStats)</a>
<a class="sourceLine" id="cb38-45" title="45"><span class="kw">abline</span>(<span class="dt">v=</span>observedTestStat)</a>
<a class="sourceLine" id="cb38-46" title="46"><span class="kw">sum</span>(permutedTestStats <span class="op">&gt;=</span><span class="st"> </span>observedTestStat)<span class="op">/</span>N</a>
<a class="sourceLine" id="cb38-47" title="47"><span class="kw">sum</span>(permutedTestStats <span class="op">&lt;=</span><span class="st"> </span>observedTestStat)<span class="op">/</span>N</a>
<a class="sourceLine" id="cb38-48" title="48"></a>
<a class="sourceLine" id="cb38-49" title="49"><span class="co"># Question 5</span></a>
<a class="sourceLine" id="cb38-50" title="50"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb38-51" title="51">?SaratogaHouses</a>
<a class="sourceLine" id="cb38-52" title="52"><span class="kw">View</span>(SaratogaHouses)</a>
<a class="sourceLine" id="cb38-53" title="53"><span class="kw">table</span>(SaratogaHouses<span class="op">$</span>fuel)</a>
<a class="sourceLine" id="cb38-54" title="54"></a>
<a class="sourceLine" id="cb38-55" title="55">myTest &lt;-<span class="st"> </span><span class="kw">kruskal.test</span>(price<span class="op">~</span>fuel, <span class="dt">data=</span>SaratogaHouses)</a>
<a class="sourceLine" id="cb38-56" title="56">observedTestStat &lt;-<span class="st"> </span>myTest<span class="op">$</span>statistic</a>
<a class="sourceLine" id="cb38-57" title="57"></a>
<a class="sourceLine" id="cb38-58" title="58"><span class="kw">boxplot</span>(price<span class="op">~</span>fuel, <span class="dt">data=</span>SaratogaHouses)</a>
<a class="sourceLine" id="cb38-59" title="59"><span class="kw">median</span>(SaratogaHouses<span class="op">$</span>price[SaratogaHouses<span class="op">$</span>fuel<span class="op">==</span><span class="st">&quot;gas&quot;</span>])</a>
<a class="sourceLine" id="cb38-60" title="60"></a>
<a class="sourceLine" id="cb38-61" title="61">?ToothGrowth</a>
<a class="sourceLine" id="cb38-62" title="62"><span class="kw">xyplot</span>(len <span class="op">~</span><span class="st"> </span>dose, <span class="dt">groups=</span>supp, <span class="dt">data=</span>ToothGrowth, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;a&quot;</span>), <span class="dt">auto.key=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb38-63" title="63"></a>
<a class="sourceLine" id="cb38-64" title="64">myaov &lt;-<span class="st"> </span><span class="kw">aov</span>(len <span class="op">~</span><span class="st"> </span><span class="kw">as.factor</span>(dose)<span class="op">+</span>supp<span class="op">+</span><span class="kw">as.factor</span>(dose)<span class="op">:</span>supp, <span class="dt">data=</span>ToothGrowth)</a>
<a class="sourceLine" id="cb38-65" title="65"><span class="kw">summary</span>(myaov)</a>
<a class="sourceLine" id="cb38-66" title="66"></a>
<a class="sourceLine" id="cb38-67" title="67"> ?RailTrail</a>
<a class="sourceLine" id="cb38-68" title="68"><span class="kw">boxplot</span>(cloudcover <span class="op">~</span><span class="st"> </span>weekday, <span class="dt">data=</span>RailTrail, <span class="dt">names=</span><span class="kw">c</span>(<span class="st">&quot;Weekend/Holiday&quot;</span>, <span class="st">&quot;Weekday&quot;</span>), <span class="dt">ylab=</span><span class="st">&quot;Cloud Cover Measurement (in oktas)&quot;</span>)</a>
<a class="sourceLine" id="cb38-69" title="69"><span class="kw">View</span>(RailTrail)</a>
<a class="sourceLine" id="cb38-70" title="70"><span class="co"># ind samples</span></a>
<a class="sourceLine" id="cb38-71" title="71"><span class="kw">t.test</span>(cloudcover <span class="op">~</span><span class="st"> </span>weekday, <span class="dt">data =</span> RailTrail, <span class="dt">mu =</span> <span class="dv">0</span>, <span class="dt">alternative =</span> <span class="st">&quot;two.sided&quot;</span>, <span class="dt">conf.level =</span> <span class="fl">0.95</span>)</a></code></pre></div>
</div>
<div id="assessment-quiz-7" class="section level5">
<h5>Assessment Quiz</h5>
<p><br></p>
</div>
</div>
</div>
<div id="useful-r-tidbits" class="section level3">
<h3>Useful R Tidbits</h3>
<div id="gg-plot-basis-sharp-sight-the-ultimate-guide-to-the-ggplot-boxplot" class="section level4">
<h4>GG Plot Basis, <a href="%5BSharp%20Sight:%20The%20Ultimate%20Guide%20to%20the%20GGPlot%20Boxplot%5D">Sharp Sight: The Ultimate Guide to the GGPlot Boxplot</a></h4>
<p>Importantly, geoms have “aesthetic attributes.”<br></p>
<p>Again, this is more simple than it sounds like, so don’t overthink it.<br></p>
<p>An “aesthetic attribute” is just a graphical attribute of the things that we draw. Aesthetic attributes are the attributes of geoms. So, we’re drawing things (geoms) and those geoms have attributes (aesthetic attributes).</p>
<p>What sorts of aesthetic attributes do geoms have? Simple things like their position along the x-axis, position along the y axis, color, shape, etc. So for example, if you draw points (geom_point()), those points will have x-axis positions, y-axis positions, colors, shapes, etc.</p>
<p>In very simple visualizations (like the ggplot boxplot), we’ll just be plotting variables on the x-axis and y-axis. How do we indicate which variable to “connect” to the x-axis and which variable to “connect” to the y-axis?</p>
<p>We do this with the aes() function.</p>
<p>In slightly more technical terms, we use the aes() function to create a “mapping” from the dataset to the “aesthetic attributes” of the things that we plot. The term “aesthetic</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="co"># PLOT BOXPLOT</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="kw">ggplot</span>(<span class="dt">data =</span> msleep, <span class="kw">aes</span>(<span class="dt">x =</span> vore, <span class="dt">y =</span> sleep_total)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p>What have we done here?</p>
<p>We called the ggplot() function. Inside the ggplot() function, we specified that we will plot data from the msleep dataframe with the code data = msleep.</p>
<p>Also inside of the ggplot() function, we called the aes() function. Here, the aes() function indicates that we are going to “map” the vore variable to the x-axis and we will map the sleep_total variable to the y-axis.</p>
<p>Finally, on the second line, we indicated that we will plot a boxplot by using the syntax geom_boxplot().</p>
<p>Like I said … it’s really straightforward to make a boxplot in ggplot2 once you know how ggplot2 works.</p>
<p><a href="%5BSharp%20Sight:%20The%20Ultimate%20Guide%20to%20the%20GGPlat%20Boxplot%5D">Sharp Sight: The Ultimate Guide to the GGPlot Boxplot</a></p>
<p><br></p>
</div>
<div id="creating-factors-r-4-data-science-factors" class="section level4">
<h4>Creating Factors, <a href="https://r4ds.had.co.nz/factors.html">R 4 Data Science: Factors</a></h4>
<p>Imagine that you have a variable that records month:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">x1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Mar&quot;</span>)</a></code></pre></div>
<p>Using a string to record this variable has two problems:</p>
<p>There are only twelve possible months, and there’s nothing saving you from typos:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1">    x2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Jam&quot;</span>, <span class="st">&quot;Mar&quot;</span>)</a></code></pre></div>
<p>It doesn’t sort in a useful way:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">sort</span>(x1)</a>
<a class="sourceLine" id="cb42-2" title="2"><span class="co">#&gt; [1] &quot;Apr&quot; &quot;Dec&quot; &quot;Jan&quot; &quot;Mar&quot;</span></a></code></pre></div>
<p>You can fix both of these problems with a factor. To create a factor you must start by creating a list of the valid levels:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">month_levels &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb43-2" title="2">  <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </a>
<a class="sourceLine" id="cb43-3" title="3">  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span></a>
<a class="sourceLine" id="cb43-4" title="4">)</a></code></pre></div>
<p>Now you can create a factor:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">y1 &lt;-<span class="st"> </span><span class="kw">factor</span>(x1, <span class="dt">levels =</span> month_levels)</a>
<a class="sourceLine" id="cb44-2" title="2">y1</a>
<a class="sourceLine" id="cb44-3" title="3"><span class="co">#&gt; [1] Dec Apr Jan Mar</span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="kw">sort</span>(y1)</a>
<a class="sourceLine" id="cb44-6" title="6"><span class="co">#&gt; [1] Jan Mar Apr Dec</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></a>
<a class="sourceLine" id="cb44-8" title="8"></a>
<a class="sourceLine" id="cb44-9" title="9"><span class="co"># And any values not in the set will be silently converted to NA:</span></a>
<a class="sourceLine" id="cb44-10" title="10"></a>
<a class="sourceLine" id="cb44-11" title="11">y2 &lt;-<span class="st"> </span><span class="kw">factor</span>(x2, <span class="dt">levels =</span> month_levels)</a>
<a class="sourceLine" id="cb44-12" title="12">y2</a>
<a class="sourceLine" id="cb44-13" title="13"><span class="co">#&gt; [1] Dec  Apr  &lt;NA&gt; Mar </span></a>
<a class="sourceLine" id="cb44-14" title="14"><span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></a></code></pre></div>
<p>If you want a warning, you can use readr::parse_factor():</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">y2 &lt;-<span class="st"> </span><span class="kw">parse_factor</span>(x2, <span class="dt">levels =</span> month_levels)</a>
<a class="sourceLine" id="cb45-2" title="2"><span class="co">#&gt; Warning: 1 parsing failure.</span></a>
<a class="sourceLine" id="cb45-3" title="3"><span class="co">#&gt; row col           expected actual</span></a>
<a class="sourceLine" id="cb45-4" title="4"><span class="co">#&gt;   3  -- value in level set    Jam</span></a></code></pre></div>
<p>If you omit the levels, they’ll be taken from the data in alphabetical order:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">factor</span>(x1)</a>
<a class="sourceLine" id="cb46-2" title="2"><span class="co">#&gt; [1] Dec Apr Jan Mar</span></a>
<a class="sourceLine" id="cb46-3" title="3"><span class="co">#&gt; Levels: Apr Dec Jan Mar</span></a></code></pre></div>
<p>Sometimes you’d prefer that the order of the levels match the order of the first appearance in the data. You can do that when creating the factor by setting levels to unique(x), or after the fact, with fct_inorder():</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1">f1 &lt;-<span class="st"> </span><span class="kw">factor</span>(x1, <span class="dt">levels =</span> <span class="kw">unique</span>(x1))</a>
<a class="sourceLine" id="cb47-2" title="2">f1</a>
<a class="sourceLine" id="cb47-3" title="3"><span class="co">#&gt; [1] Dec Apr Jan Mar</span></a>
<a class="sourceLine" id="cb47-4" title="4"><span class="co">#&gt; Levels: Dec Apr Jan Mar</span></a>
<a class="sourceLine" id="cb47-5" title="5"></a>
<a class="sourceLine" id="cb47-6" title="6">f2 &lt;-<span class="st"> </span>x1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">factor</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_inorder</span>()</a>
<a class="sourceLine" id="cb47-7" title="7">f2</a>
<a class="sourceLine" id="cb47-8" title="8"><span class="co">#&gt; [1] Dec Apr Jan Mar</span></a>
<a class="sourceLine" id="cb47-9" title="9"><span class="co">#&gt; Levels: Dec Apr Jan Mar</span></a></code></pre></div>
<p>If you ever need to access the set of valid levels directly, you can do so with levels():</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">levels</span>(f2)</a>
<a class="sourceLine" id="cb48-2" title="2"><span class="co">#&gt; [1] &quot;Dec&quot; &quot;Apr&quot; &quot;Jan&quot; &quot;Mar&quot;</span></a>
<a class="sourceLine" id="cb48-3" title="3"></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="co"># Note from elsewhere: if factor sort by level, if character sort alphabetically</span></a></code></pre></div>
<p><br></p>
</div>
<div id="change-levels-stack-overflow-levels" class="section level4">
<h4>Change Levels, <a href="https://stackoverflow.com/questions/4622060/case-statement-equivalent-in-r">Stack Overflow levels</a></h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"><span class="co"># If you got factor then you could change levels by standard method:</span></a>
<a class="sourceLine" id="cb49-2" title="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&#39;cow&#39;</span>,<span class="st">&#39;pig&#39;</span>,<span class="st">&#39;eagle&#39;</span>,<span class="st">&#39;pigeon&#39;</span>), </a>
<a class="sourceLine" id="cb49-3" title="3">             <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb49-4" title="4">df<span class="op">$</span>type &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>name) <span class="co"># First step: copy vector and make it factor</span></a>
<a class="sourceLine" id="cb49-5" title="5"><span class="co"># Change levels:</span></a>
<a class="sourceLine" id="cb49-6" title="6"><span class="kw">levels</span>(df<span class="op">$</span>type) &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb49-7" title="7">    <span class="dt">animal =</span> <span class="kw">c</span>(<span class="st">&quot;cow&quot;</span>, <span class="st">&quot;pig&quot;</span>),</a>
<a class="sourceLine" id="cb49-8" title="8">    <span class="dt">bird =</span> <span class="kw">c</span>(<span class="st">&quot;eagle&quot;</span>, <span class="st">&quot;pigeon&quot;</span>)</a>
<a class="sourceLine" id="cb49-9" title="9">)</a>
<a class="sourceLine" id="cb49-10" title="10">df</a>
<a class="sourceLine" id="cb49-11" title="11"><span class="co">#     name   type</span></a>
<a class="sourceLine" id="cb49-12" title="12"><span class="co"># 1    cow animal</span></a>
<a class="sourceLine" id="cb49-13" title="13"><span class="co"># 2    pig animal</span></a>
<a class="sourceLine" id="cb49-14" title="14"><span class="co"># 3  eagle   bird</span></a>
<a class="sourceLine" id="cb49-15" title="15"><span class="co"># 4 pigeon   bird</span></a></code></pre></div>
<p><br></p>
</div>
<div id="case_when-rdocumentation" class="section level4">
<h4>Case_when, <a href="https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/case_when">Rdocumentation</a></h4>
<p>A general vectorised if</p>
<p>This function allows you to vectorise multiple if and else if statements. It is an R equivalent of the SQL CASE WHEN statement.</p>
<p>Usage</p>
<p>case_when(…)</p>
<p>Arguments</p>
<p>…</p>
<p>A sequence of two-sided formulas. The left hand side (LHS) determines which values match this case. The right hand side (RHS) provides the replacement value.</p>
<pre><code>The LHS must evaluate to a logical vector. The RHS does need to be logical, but all RHSs must evaluate to the same type of vector.

Both LHS and RHS may have the same length of either 1 or n. The value of n must be consistent across all cases. The case of n == 0 is treated as a variant of n != 1.</code></pre>
<p>These dots support tidy dots features.</p>
<p>Value</p>
<p>A vector of length 1 or n, matching the length of the logical input or output vectors, with the type (and attributes) of the first RHS. Inconsistent lengths or types will generate an error.</p>
<p>Examples</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"><span class="co"># NOT RUN {</span></a>
<a class="sourceLine" id="cb51-2" title="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">50</span></a>
<a class="sourceLine" id="cb51-3" title="3"><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-4" title="4">  x <span class="op">%%</span><span class="st"> </span><span class="dv">35</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;fizz buzz&quot;</span>,</a>
<a class="sourceLine" id="cb51-5" title="5">  x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;fizz&quot;</span>,</a>
<a class="sourceLine" id="cb51-6" title="6">  x <span class="op">%%</span><span class="st"> </span><span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;buzz&quot;</span>,</a>
<a class="sourceLine" id="cb51-7" title="7">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.character</span>(x)</a>
<a class="sourceLine" id="cb51-8" title="8">)</a>
<a class="sourceLine" id="cb51-9" title="9"></a>
<a class="sourceLine" id="cb51-10" title="10"><span class="co"># Like an if statement, the arguments are evaluated in order, so you must</span></a>
<a class="sourceLine" id="cb51-11" title="11"><span class="co"># proceed from the most specific to the most general. This won&#39;t work:</span></a>
<a class="sourceLine" id="cb51-12" title="12"><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-13" title="13">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.character</span>(x),</a>
<a class="sourceLine" id="cb51-14" title="14">  x <span class="op">%%</span><span class="st">  </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;fizz&quot;</span>,</a>
<a class="sourceLine" id="cb51-15" title="15">  x <span class="op">%%</span><span class="st">  </span><span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;buzz&quot;</span>,</a>
<a class="sourceLine" id="cb51-16" title="16">  x <span class="op">%%</span><span class="st"> </span><span class="dv">35</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;fizz buzz&quot;</span></a>
<a class="sourceLine" id="cb51-17" title="17">)</a>
<a class="sourceLine" id="cb51-18" title="18"></a>
<a class="sourceLine" id="cb51-19" title="19"><span class="co"># All RHS values need to be of the same type. Inconsistent types will throw an error.</span></a>
<a class="sourceLine" id="cb51-20" title="20"><span class="co"># This applies also to NA values used in RHS: NA is logical, use</span></a>
<a class="sourceLine" id="cb51-21" title="21"><span class="co"># typed values like NA_real_, NA_complex, NA_character_, NA_integer_ as appropriate.</span></a>
<a class="sourceLine" id="cb51-22" title="22"><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-23" title="23">  x <span class="op">%%</span><span class="st"> </span><span class="dv">35</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_character_</span>,</a>
<a class="sourceLine" id="cb51-24" title="24">  x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;fizz&quot;</span>,</a>
<a class="sourceLine" id="cb51-25" title="25">  x <span class="op">%%</span><span class="st"> </span><span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;buzz&quot;</span>,</a>
<a class="sourceLine" id="cb51-26" title="26">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.character</span>(x)</a>
<a class="sourceLine" id="cb51-27" title="27">)</a>
<a class="sourceLine" id="cb51-28" title="28"><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-29" title="29">  x <span class="op">%%</span><span class="st"> </span><span class="dv">35</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">35</span>,</a>
<a class="sourceLine" id="cb51-30" title="30">  x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">5</span>,</a>
<a class="sourceLine" id="cb51-31" title="31">  x <span class="op">%%</span><span class="st"> </span><span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>,</a>
<a class="sourceLine" id="cb51-32" title="32">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA_real_</span></a>
<a class="sourceLine" id="cb51-33" title="33">)</a>
<a class="sourceLine" id="cb51-34" title="34"><span class="co"># This throws an error as NA is logical not numeric</span></a>
<a class="sourceLine" id="cb51-35" title="35"><span class="co"># }</span></a>
<a class="sourceLine" id="cb51-36" title="36"><span class="co"># NOT RUN {</span></a>
<a class="sourceLine" id="cb51-37" title="37"><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-38" title="38">  x <span class="op">%%</span><span class="st"> </span><span class="dv">35</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">35</span>,</a>
<a class="sourceLine" id="cb51-39" title="39">  x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">5</span>,</a>
<a class="sourceLine" id="cb51-40" title="40">  x <span class="op">%%</span><span class="st"> </span><span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>,</a>
<a class="sourceLine" id="cb51-41" title="41">  <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb51-42" title="42">)</a>
<a class="sourceLine" id="cb51-43" title="43"><span class="co"># }</span></a>
<a class="sourceLine" id="cb51-44" title="44"><span class="co"># NOT RUN {</span></a>
<a class="sourceLine" id="cb51-45" title="45"><span class="co"># case_when is particularly useful inside mutate when you want to</span></a>
<a class="sourceLine" id="cb51-46" title="46"><span class="co"># create a new variable that relies on a complex combination of existing</span></a>
<a class="sourceLine" id="cb51-47" title="47"><span class="co"># variables</span></a>
<a class="sourceLine" id="cb51-48" title="48">starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-49" title="49"><span class="st">  </span><span class="kw">select</span>(name<span class="op">:</span>mass, gender, species) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-50" title="50"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb51-51" title="51">    <span class="dt">type =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb51-52" title="52">      height <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span> <span class="op">|</span><span class="st"> </span>mass <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span> <span class="op">~</span><span class="st"> &quot;large&quot;</span>,</a>
<a class="sourceLine" id="cb51-53" title="53">      species <span class="op">==</span><span class="st"> &quot;Droid&quot;</span>        <span class="op">~</span><span class="st"> &quot;robot&quot;</span>,</a>
<a class="sourceLine" id="cb51-54" title="54">      <span class="ot">TRUE</span>                      <span class="op">~</span><span class="st">  &quot;other&quot;</span></a>
<a class="sourceLine" id="cb51-55" title="55">    )</a>
<a class="sourceLine" id="cb51-56" title="56">  )</a></code></pre></div>
<p><br></p>
</div>
<div id="create-your-own-operator-stackoverflow-concatoperator" class="section level4">
<h4>Create your own operator, <a href="https://stackoverflow.com/questions/7201341/how-can-two-strings-be-concatenated">StackOverflow Concat/Operator</a></h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co"># You can create you own operator :</span></a>
<a class="sourceLine" id="cb52-2" title="2"></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="st">&#39;%&amp;%&#39;</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, y)<span class="kw">paste0</span>(x,y)</a>
<a class="sourceLine" id="cb52-4" title="4"><span class="st">&quot;new&quot;</span> <span class="op">%&amp;%</span><span class="st"> &quot;operator&quot;</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="co"># [1] newoperator`</span></a>
<a class="sourceLine" id="cb52-6" title="6"></a>
<a class="sourceLine" id="cb52-7" title="7"><span class="co"># You can also redefine &#39;and&#39; (&amp;) operator :</span></a>
<a class="sourceLine" id="cb52-8" title="8"></a>
<a class="sourceLine" id="cb52-9" title="9"><span class="st">&#39;&amp;&#39;</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, y)<span class="kw">paste0</span>(x,y)</a>
<a class="sourceLine" id="cb52-10" title="10"><span class="st">&quot;dirty&quot;</span> <span class="op">&amp;</span><span class="st"> &quot;trick&quot;</span></a>
<a class="sourceLine" id="cb52-11" title="11"><span class="st">&quot;dirtytrick&quot;</span></a></code></pre></div>
<p>Messing with baseline syntax is ugly, but so is using paste()/paste0() if you work only with your own code you can (almost always) replace logical &amp; and operator with * and do multiplication of logical values instead of using logical ‘and &amp;’</p>
<p><br></p>
</div>
<div id="defining-a-function-swcarpentry" class="section level4">
<h4>Defining a function, <a href="https://swcarpentry.github.io/r-novice-inflammation/02-func-R/">SWCarpentry</a></h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1"><span class="co"># SW Carp</span></a>
<a class="sourceLine" id="cb53-2" title="2">fahrenheit_to_celsius &lt;-<span class="st"> </span><span class="cf">function</span>(temp_F) {</a>
<a class="sourceLine" id="cb53-3" title="3">  temp_C &lt;-<span class="st"> </span>(temp_F <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span><span class="dv">5</span> <span class="op">/</span><span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb53-4" title="4">  <span class="kw">return</span>(temp_C)</a>
<a class="sourceLine" id="cb53-5" title="5">}</a></code></pre></div>
<p><br></p>
</div>
<div id="latex" class="section level4">
<h4>LaTeX</h4>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="co"># To put a tilde over a letter, we can use either \tilde or \widetilde. As for which one to use in which situation, compiling a document with the following as its part can help comparison.</span></a>
<a class="sourceLine" id="cb54-2" title="2"></a>
<a class="sourceLine" id="cb54-3" title="3"><span class="op">$</span>\tilde{A}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\widetilde{A}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-4" title="4"></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="er">$</span>\tilde{\mathcal A}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\widetilde{\mathcal A}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-6" title="6"></a>
<a class="sourceLine" id="cb54-7" title="7"><span class="er">$</span>\tilde{ABC}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\widetilde{ABC}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-8" title="8"></a>
<a class="sourceLine" id="cb54-9" title="9"><span class="co"># To put a bar over a letter, we can use either \bar or \overline. It seems that \bar is to \overline what \tilde is to \widetilde. There don’t seem to be \overtilde or \widebar.</span></a>
<a class="sourceLine" id="cb54-10" title="10"></a>
<a class="sourceLine" id="cb54-11" title="11"><span class="er">$</span>\bar{A}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\overline{A}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-12" title="12"></a>
<a class="sourceLine" id="cb54-13" title="13"><span class="er">$</span>\bar{\mathcal A}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\overline{\mathcal A}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-14" title="14"></a>
<a class="sourceLine" id="cb54-15" title="15"><span class="er">$</span>\bar{ABC}<span class="op">$</span><span class="st"> </span>vs <span class="op">$</span>\overline{ABC}<span class="op">$</span></a>
<a class="sourceLine" id="cb54-16" title="16"><span class="co"># Can no longer find the link for this, but it was a blogpost</span></a></code></pre></div>
<p><br></p>
</div>
<div id="gg-plot-plot-theme-tricks" class="section level4">
<h4>GG Plot Plot theme tricks</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co"># Default plot</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="kw">print</span>(p)</a>
<a class="sourceLine" id="cb55-3" title="3"></a>
<a class="sourceLine" id="cb55-4" title="4"><span class="co"># Add titles</span></a>
<a class="sourceLine" id="cb55-5" title="5">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Effect of Vitamin C on Tooth Growth&quot;</span>,</a>
<a class="sourceLine" id="cb55-6" title="6">              <span class="dt">subtitle =</span> <span class="st">&quot;Plot of length by dose&quot;</span>,</a>
<a class="sourceLine" id="cb55-7" title="7">              <span class="dt">caption =</span> <span class="st">&quot;Data source: ToothGrowth&quot;</span>)</a>
<a class="sourceLine" id="cb55-8" title="8"><span class="co">#Bold font</span></a>
<a class="sourceLine" id="cb55-9" title="9">p <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb55-10" title="10">  <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb55-11" title="11">  <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>),</a>
<a class="sourceLine" id="cb55-12" title="12">  <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;green&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;italic&quot;</span>)</a>
<a class="sourceLine" id="cb55-13" title="13">)</a>
<a class="sourceLine" id="cb55-14" title="14"><span class="co"># Justification center</span></a>
<a class="sourceLine" id="cb55-15" title="15">p <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb55-16" title="16">  <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb55-17" title="17">  <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb55-18" title="18">)</a></code></pre></div>
<p><br></p>
</div>
<div id="cut-funtion" class="section level4">
<h4>Cut funtion</h4>
<p>The intervals defined by the cut() function are (by default) closed on the right. To see what that means, try this:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">cut</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb56-2" title="2"><span class="co"># [1] (0,1] (1,2]</span></a></code></pre></div>
<p>As you can see, the integer 1 gets included in the range (0,1], not in the range (1,2]. It doesn’t get double-counted, and for any input value falling outside of the bins you define, cut() will return a value of NA.</p>
<p>When dealing with integer-valued data, I tend to set break points between the integers, just to avoid tripping myself up. In fact, doing this with your data (as shown below), reveals that the 2nd and 3rd bins were actually incorrectly named, which illustrates the point quite nicely! <br> <br></p>
</div>
<div id="hide-code-messages-r-markdown-cookbook-hide-code" class="section level4">
<h4>Hide code messages, <a href="https://bookdown.org/yihui/rmarkdown-cookbook/hide-one.html">R Markdown Cookbook: Hide Code</a></h4>
<p>By default, knitr displays all possible output from a code chunk, including the source code, text output, messages, warnings, and plots. You can hide them individually using the corresponding chunk options.</p>
<p>Hide source code:</p>
<pre><code>## [1] 2</code></pre>
<p>Hide text output (you can also use <code>results = FALSE</code>):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="kw">print</span>(<span class="st">&quot;You will not see the text output.&quot;</span>)</a></code></pre></div>
<p>Hide messages:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">message</span>(<span class="st">&quot;You will not see the message.&quot;</span>)</a></code></pre></div>
<p>Hide warning messages:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="co"># this will generate a warning but it will be suppressed</span></a>
<a class="sourceLine" id="cb60-2" title="2"><span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 2 4 4</code></pre>
<p>Hide plots:</p>
<p><code>{r, fig.show='hide'} plot(cars)</code></p>
<p>Note that the plot will be generated in the above chunk. It is just not displayed in the output.</p>
<p>One frequently asked question about knitr is how to hide package loading messages. For example, when you library(tidyverse) or library(ggplot2), you may see some loading messages. Such messages can also be suppressed by the chunk option message = FALSE.</p>
<p>You can also selectively show or hide these elements by indexing them. In the following example, we only show the fourth and fifth expressions of the R source code (note that a comment counts as one expression), the first two messages, and the second and third warnings:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb62-2" title="2">x</a></code></pre></div>
<pre><code>##  [1] -0.98221429  1.14113450 -0.65854031 -1.18360262  0.66462171  0.23796636
##  [7] -0.02140496 -0.25543483  0.18816620 -0.94529676</code></pre>
<pre><code>## Here is the message 1</code></pre>
<pre><code>## Here is the message 2</code></pre>
<pre><code>## Warning: Here is the warning 2</code></pre>
<pre><code>## Warning: Here is the warning 3</code></pre>
<p>You can use negative indices, too. For example, echo = -2 means to exclude the second expression of the source code in the output.</p>
<p>Similarly, you can choose which plots to show or hide by using indices for the fig.keep option. For example, fig.keep = 1:2 means to keep the first two plots. There are a few shortcuts for this option: fig.keep = “first” will only keep the first plot, fig.keep = “last” only keeps the last plot, and fig.keep = “none” discards all plots. Note that the two options fig.keep = “none” and fig.show = “hide” are different: the latter will generate plots but only hide them, and the former will not generate plot files at all.</p>
<p><br></p>
</div>
<div id="barplot-customization-basic-r-barplot-customization-advanced-r-barplot-customization" class="section level4">
<h4>Barplot customization, <a href="https://www.r-graph-gallery.com/209-the-options-of-barplot.html">Basic R Barplot Customization</a>, <a href="https://www.r-graph-gallery.com/210-custom-barplot-layout.html">Advanced R Barplot Customization</a></h4>
<p>The las argument allows to change the orientation of the axis labels:</p>
<pre><code>0: always parallel to the axis
1: always horizontal
2: always perpendicular to the axis
3: always vertical.</code></pre>
<p>This is specially helpful for horizontal bar chart. Change the group names using the names.arg argument. The vector you provide must be the same length as the number of categories.</p>
<p>Customize the labels:</p>
<pre><code>font.axis: font: 1: normal, 2: bold, 3: italic, 4: bold italic
col.axis: color
cex.axis: size</code></pre>
<p>Customize axis title:</p>
<pre><code>font.lab
col.lab
cex.lab</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">barplot</span>(<span class="dt">height=</span>data<span class="op">$</span>value, <span class="dt">names=</span>data<span class="op">$</span>name, <span class="dt">col=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="dt">horiz=</span>T , <span class="dt">las=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb71-2" title="2"><span class="kw">barplot</span>(<span class="dt">height=</span>data<span class="op">$</span>value, <span class="dt">names.arg=</span><span class="kw">c</span>(<span class="st">&quot;group1&quot;</span>,<span class="st">&quot;group2&quot;</span>,<span class="st">&quot;group3&quot;</span>,<span class="st">&quot;group4&quot;</span>,<span class="st">&quot;group5&quot;</span>), <span class="dt">col=</span><span class="st">&quot;#69b3a2&quot;</span>)</a>
<a class="sourceLine" id="cb71-3" title="3"></a>
<a class="sourceLine" id="cb71-4" title="4"><span class="co"># Customize labels</span></a>
<a class="sourceLine" id="cb71-5" title="5"><span class="kw">barplot</span>(<span class="dt">height=</span>data<span class="op">$</span>value, <span class="dt">names=</span>data<span class="op">$</span>name, </a>
<a class="sourceLine" id="cb71-6" title="6">        <span class="dt">names.arg=</span><span class="kw">c</span>(<span class="st">&quot;group1&quot;</span>,<span class="st">&quot;group2&quot;</span>,<span class="st">&quot;group3&quot;</span>,<span class="st">&quot;group4&quot;</span>,<span class="st">&quot;group5&quot;</span>), </a>
<a class="sourceLine" id="cb71-7" title="7">        <span class="dt">font.axis=</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb71-8" title="8">        <span class="dt">col.axis=</span><span class="st">&quot;orange&quot;</span>, </a>
<a class="sourceLine" id="cb71-9" title="9">        <span class="dt">cex.axis=</span><span class="fl">1.5</span> </a>
<a class="sourceLine" id="cb71-10" title="10">        )</a>
<a class="sourceLine" id="cb71-11" title="11"></a>
<a class="sourceLine" id="cb71-12" title="12"><span class="co"># Customize title </span></a>
<a class="sourceLine" id="cb71-13" title="13"><span class="kw">barplot</span>(<span class="dt">height=</span>data<span class="op">$</span>value, <span class="dt">names=</span>data<span class="op">$</span>name, </a>
<a class="sourceLine" id="cb71-14" title="14">        <span class="dt">xlab=</span><span class="st">&quot;category&quot;</span>, </a>
<a class="sourceLine" id="cb71-15" title="15">        <span class="dt">font.lab=</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb71-16" title="16">        <span class="dt">col.lab=</span><span class="st">&quot;orange&quot;</span>, </a>
<a class="sourceLine" id="cb71-17" title="17">        <span class="dt">cex.lab=</span><span class="dv">2</span>  </a>
<a class="sourceLine" id="cb71-18" title="18">        )</a></code></pre></div>
</div>
<div id="inset-plot-in-another-plot-inset-a-plot-on-another-plot" class="section level4">
<h4>Inset plot in another plot, <a href="https://www.r-bloggers.com/2016/10/create-an-inset-plot/">Inset a plot on another plot</a></h4>
<p>The difficulty of plotting one plot over the top of another in R has always frustrated me. I often end up opening some photo editing software (like Gimp, which is free) and doing it manually. However, manual editing can be frustrating if you need to change the plot.<br></p>
<p>A histogram with a boxplot inset</p>
<p>I just learned a hassle free way to create insets (thanks to Ben Stewart-Koster) and wanted to share it, so here it is:</p>
<p>First, let’s simulate some fake data x &lt;- rnorm(100)<br />
y &lt;- rbinom(100, 1, 0.5)</p>
<p>Now the key step, use par to set the fig param to your desired coordinate space. e.g. in the below we can specify figures positions in 0-1 on both the x and y coordinates: par(fig = c(0,1,0,1))</p>
<p>Now plot your first figure hist(x)</p>
<p>Now the second key part, specify where in the coordinate space you want your inset figure to go: par(fig = c(0.07,0.5, 0.5, 1), new = T)<br />
boxplot(x ~ y)</p>
<p>Voila that is it, we have our figure with an inset.<br></p>
</div>
<div id="viridis-arguments" class="section level4">
<h4>Viridis Arguments</h4>
<p>Other arguments passed on to discrete_scale(), continuous_scale(), or binned_scale to control name, limits, breaks, labels and so forth. alpha</p>
<p>The alpha transparency, a number in [0,1], see argument alpha in hsv. begin</p>
<p>The (corrected) hue in [0,1] at which the viridis colormap begins. end</p>
<p>The (corrected) hue in [0,1] at which the viridis colormap ends. direction</p>
<p>Sets the order of colors in the scale. If 1, the default, colors are ordered from darkest to lightest. If -1, the order of colors is reversed. option</p>
<p>A character string indicating the colormap option to use. Four options are available: “magma” (or “A”), “inferno” (or “B”), “plasma” (or “C”), “viridis” (or “D”, the default option) and “cividis” (or “E”). aesthetics</p>
<p>Character string or vector of character strings listing the name(s) of the aesthetic(s) that this scale works with. This can be useful, for example, to apply colour settings to the colour and fill aesthetics at the same time, via aesthetics = c(“colour”, “fill”). values</p>
<p>if colours should not be evenly positioned along the gradient this vector gives the position (between 0 and 1) for each colour in the colours vector. See rescale() for a convenience function to map an arbitrary range to between 0 and 1. space</p>
<p>colour space in which to calculate gradient. Must be “Lab” - other values are deprecated. na.value</p>
<p>Missing values will be replaced with this value. guide</p>
<p>A function used to create a guide or its name. See guides() for more information. <a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">GGPlot2 Viridis Lite</a></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
